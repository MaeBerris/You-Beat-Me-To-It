{"version":3,"sources":["assets/sounds/add2.mp3","assets/sounds/remove2.mp3","assets/cassette.png","assets/sounds/wrong.mp3","assets/sounds/correct.mp3","assets/sounds/success.mp3","FirebaseContext.js","CurrentUserContext.js","LobbyContext.js","GameRoomContext.js","COLORS.js","components/Background/Background.js","components/Header/Header.js","components/Labels/GenericLabel.js","components/Button/Button.js","components/Spinner/Spinner.js","components/SignIn/SignIn.js","components/SignIn/HostHandler.js","components/SignIn/PlayerHandler.js","components/Lobby/Results.js","ip.js","components/Lobby/Search.js","components/Lobby/SelectedPlaylist.js","components/Lobby/Users.js","components/Lobby/SelectedPlaylistPlayer.js","components/Button/VolumeButton.js","components/Lobby/HostLobby.js","components/ErrorScreen/ErrorScreen.js","components/ErrorScreen/GameInProgress.js","components/Lobby/LobbyWrapper.js","components/GameRoom/ProgressBar.js","components/GameRoom/Cassette.js","components/GameRoom/LevenTest.js","components/GameRoom/SearchBar.js","components/GameRoom/PreviousSongs.js","components/GameRoom/Ranking.js","components/GameRoom/GameRoom.js","components/GameRoom/GameOver.js","components/GameRoom/GameRoomWrapper.js","GlobalStyles.js","components/App.js","index.js"],"names":["module","exports","FireBaseContext","createContext","firebaseApp","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","FireBaseContextProvider","children","Provider","CurrentUserContext","React","CurrentUserContextProvider","useState","currentRoomId","setCurrentRoomId","currentUser","setCurrentUser","usersList","setUsersList","artist","songName","time","correctGuess","setCorrectGuess","currentTrackGuesses","setCurrentTrackGuesses","undefined","isHostPresent","setIsHostPresent","console","log","useEffect","RoomRef","ref","length","onDisconnect","remove","cancel","playerId","on","snapshot","players","val","SortedArray","Object","values","sort","a","b","points","host","find","user","role","value","LobbyContext","initialState","searchResults","selectedPlaylist","loadState","Reducer","state","action","type","playlist","id","Error","LobbyContextProvider","useReducer","playlistState","dispatch","roomIdState","setRoomId","location","setLocation","roomExists","setRoomExists","roomLocationRef","locationFromDatabase","off","startSearch","receivePlaylists","data","selectPlaylist","deletePlaylist","GameRoomContext","GameRoomContextProvider","trackUrl","setTrackUrl","gamePhase","setGamePhase","trackInfo","setTrackInfo","historyArray","setHistoryArray","result","setResult","round","setRound","GameRoomId","gameRoomExists","setGameRoomExists","gameStarted","setGameStarted","COLORS","main","secondary","tertiary","midnight","Wrapper","styled","div","Shape1","Shape2","Shape3","ChildWrapper","Footer","Link","Background","href","target","size","Beat","Shape","Header","Content","GenericLabel","Button","handler","disabled","StyledButton","onClick","button","Spinner","color","SpinWheel","props","Spin","keyframes","FiLoader","Input","input","SignInHost","buttonHandler","buttonMessage","nickName","setNickName","loading","setLoading","error","setError","useContext","history","useHistory","roomId","useParams","onKeyDown","ev","key","onChange","hostHandler","fetch","method","body","JSON","stringify","headers","Accept","then","res","ok","json","userInfo","push","roomInfo","catch","err","PlayerHandler","Results","setIsOpen","animation","setAnimation","style","height","display","alignItems","onAnimationEnd","map","item","ResultWrapper","Image","src","picture_medium","ResultsInfo","Title","title","Tracks","nb_tracks","Open","Close","img","p","ip","Search","searchTerm","setSearchTerm","isOpen","SearchPlaylist","TopBar","placeholder","string","split","join","searchToUrl","SpinnerPosition","SelectedPlaylist","Icon","Users","addUserRef","removeUserRef","previousPlayers","useRef","current","usePrevious","isCopied","setIsCopied","play","addUser","List","index","User","navigator","clipboard","writeText","window","ColorsAnimation","Props","SelectedPlaylistPlayer","VolumeButton","volume","setVolume","SlidderWrapper","Slider","min","max","validatePlaylist","Promise","resolve","reject","promise","BottomSection","ButtonWrapper","BigButton","ErrorAnimation","ErrorMessage","Text","HostLobby","keys","ErrorScreen","message","spinner","Message","GameInProgress","RoundCounter","RoundSpan","span","LobbyWrapper","roomRef","exists","replace","SignIn","ProgressBar","barRef","calculateGuessPosition","position","clientWidth","toFixed","Bar","guess","Guess","Tip","Cassette","setArtist","setSongName","name","title_short","MasterWrapper","cassette","Counter","CogWrapper","Cog","Peg1","Peg2","Peg3","Peg4","CogWrapper2","Label","SongName","PlaceHolder","SongNameSpan","Separator","ArtistSpan","Appear","calculateDistance","artistOrSongName","valueToSearch","artistOrSong","toLowerCase","wordsArray","allSubStrings","forEach","word","i","trim","newArray","slice","ArtistResultMap","searchingFor","distance","leven","marginOfError","Math","floor","fetchHelper","SearchBar","wrongRef","correctRef","successRef","placeHolderText","setPlaceHolderText","wrong","correct","success","artistResult","songNameResult","timeStamp","Date","getTime","previousGuess","Fail","PreviousSong","SongListWrapper","song","SongInfoWrapper","SongArt","album","cover_medium","InfoSection","Artist","reverse","Ranking","UsersListWrapper","UserWrapper","InfoWrapper","Rank","UserInfoWrapper","NameWrapper","UserName","CorrectGuessWrapper","usersCorrectGuess","ScoreInfoWrapper","Score","h1","asyncRequest","currentPhase","accept","Player","audio","GameRoom","setTime","audioRef","interval","workerTimers","phase","pause","currentTrackInfo","preview","GameOverScreen","ButtonsWrapper","GameRoomWrapper","GameOver","GlobalStyle","createGlobalStyle","App","exact","path","HostHandler","GlobalStyles","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1a9f3dd8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/add2.d31c69da.mp3\";","module.exports = __webpack_public_path__ + \"static/media/remove2.120df319.mp3\";","module.exports = __webpack_public_path__ + \"static/media/cassette.9ea9d06a.png\";","module.exports = __webpack_public_path__ + \"static/media/wrong.47687ae3.mp3\";","module.exports = __webpack_public_path__ + \"static/media/correct.ea8e8063.mp3\";","module.exports = __webpack_public_path__ + \"static/media/success.0c5e0bb9.mp3\";","import React, { createContext } from \"react\";\r\nimport * as firebase from \"firebase\";\r\n\r\nexport const FireBaseContext = createContext(null);\r\n\r\nvar firebaseConfig = {\r\n  apiKey: \"AIzaSyCvDktR2m3-rIU3ddPsLkqT2Yfp4EASteA\",\r\n  authDomain: \"you-beat-me-to-it.firebaseapp.com\",\r\n  databaseURL: \"https://you-beat-me-to-it.firebaseio.com\",\r\n  projectId: \"you-beat-me-to-it\",\r\n  storageBucket: \"you-beat-me-to-it.appspot.com\",\r\n  messagingSenderId: \"1075878771170\",\r\n  appId: \"1:1075878771170:web:253cca6ef4a7e1e7a8e1bb\",\r\n};\r\n\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\n\r\nconst FireBaseContextProvider = ({ children }) => {\r\n  return (\r\n    <FireBaseContext.Provider firebaseApp={firebaseApp}>\r\n      {children}\r\n    </FireBaseContext.Provider>\r\n  );\r\n};\r\n\r\nexport default FireBaseContextProvider;\r\n","import React from \"react\";\r\nimport * as firebase from \"firebase\";\r\n\r\nexport const CurrentUserContext = React.createContext(null);\r\n\r\nconst CurrentUserContextProvider = ({ children }) => {\r\n  const [currentRoomId, setCurrentRoomId] = React.useState(null);\r\n  const [currentUser, setCurrentUser] = React.useState(null);\r\n  const [usersList, setUsersList] = React.useState(null);\r\n  const [correctGuess, setCorrectGuess] = React.useState({\r\n    artist: false,\r\n    songName: false,\r\n    time: null,\r\n  });\r\n  const [currentTrackGuesses, setCurrentTrackGuesses] = React.useState({});\r\n  const [isHostPresent, setIsHostPresent] = React.useState(undefined);\r\n  console.log(\"isHostPresentContext\", isHostPresent);\r\n  console.log(\"currentRoomId\", currentRoomId);\r\n\r\n  React.useEffect(() => {\r\n    if (currentUser && usersList) {\r\n      const RoomRef = firebase.database().ref(`Rooms/${currentRoomId}`);\r\n      if (usersList.length === 1) {\r\n        RoomRef.onDisconnect().remove();\r\n      } else {\r\n        RoomRef.onDisconnect().cancel();\r\n      }\r\n      const playerRef = firebase\r\n        .database()\r\n        .ref(`Rooms/${currentRoomId}/players/${currentUser.playerId}`);\r\n\r\n      playerRef.onDisconnect().remove();\r\n    }\r\n  }, [currentUser, currentRoomId, usersList]);\r\n\r\n  React.useEffect(() => {\r\n    if (currentRoomId) {\r\n      const PlayersRef = firebase\r\n        .database()\r\n        .ref(`Rooms/${currentRoomId}/players`);\r\n      PlayersRef.on(\"value\", (snapshot) => {\r\n        const players = snapshot.val();\r\n        console.log(\"players\", players);\r\n        if (players === null) {\r\n          setIsHostPresent(false);\r\n        }\r\n        if (players) {\r\n          const SortedArray = Object.values(players).sort((a, b) => {\r\n            return b.points - a.points;\r\n          });\r\n          let host = SortedArray.find((user) => {\r\n            if (user.role === \"host\") {\r\n              return true;\r\n            }\r\n          });\r\n          console.log(\"host\", host);\r\n          if (host) {\r\n            setIsHostPresent(true);\r\n          } else {\r\n            setIsHostPresent(false);\r\n          }\r\n          setUsersList(SortedArray);\r\n        }\r\n      });\r\n    }\r\n  }, [setUsersList, currentRoomId]);\r\n\r\n  React.useEffect(() => {\r\n    const currentGuessesRef = firebase\r\n      .database()\r\n      .ref(`Rooms/${currentRoomId}/currentTrack/correctGuesses`);\r\n\r\n    currentGuessesRef.on(\"value\", (snapshot) => {\r\n      setCurrentTrackGuesses(snapshot.val());\r\n    });\r\n  }, [currentRoomId]);\r\n\r\n  return (\r\n    <CurrentUserContext.Provider\r\n      value={{\r\n        currentUser,\r\n        setCurrentUser,\r\n        usersList,\r\n        setUsersList,\r\n        correctGuess,\r\n        setCorrectGuess,\r\n        setCurrentRoomId,\r\n        currentTrackGuesses,\r\n        isHostPresent,\r\n      }}\r\n    >\r\n      {children}\r\n    </CurrentUserContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CurrentUserContextProvider;\r\n","import React from \"react\";\r\nimport * as firebase from \"firebase\";\r\n\r\nexport const LobbyContext = React.createContext(null);\r\n\r\nconst initialState = {\r\n  searchResults: null,\r\n  selectedPlaylist: {},\r\n  loadState: \"idle\",\r\n};\r\n\r\nfunction Reducer(state, action) {\r\n  switch (action.type) {\r\n    case \"start-search\": {\r\n      return { ...state, loadState: \"loading\" };\r\n    }\r\n    case \"receive-playlists\": {\r\n      return { ...state, searchResults: action.playlist, loadState: \"idle\" };\r\n    }\r\n    case \"select-playlist\": {\r\n      const selectedPlaylist = { [action.playlist.id]: action.playlist };\r\n      return { ...state, selectedPlaylist: selectedPlaylist };\r\n    }\r\n    case \"delete-playlist\": {\r\n      return { ...state, selectedPlaylist: {} };\r\n    }\r\n    default:\r\n      throw new Error(\"Unrecognized Action\");\r\n  }\r\n}\r\n\r\nconst LobbyContextProvider = ({ children }) => {\r\n  const [playlistState, dispatch] = React.useReducer(Reducer, initialState);\r\n  const [roomIdState, setRoomId] = React.useState(null);\r\n  const [location, setLocation] = React.useState(\"lobby\");\r\n  const [roomExists, setRoomExists] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    const roomLocationRef = firebase\r\n      .database()\r\n      .ref(`Rooms/${roomIdState}/roomLocation`);\r\n\r\n    roomLocationRef.on(\"value\", (snapshot) => {\r\n      let locationFromDatabase = snapshot.val();\r\n\r\n      setLocation(locationFromDatabase);\r\n    });\r\n    return () => {\r\n      roomLocationRef.off();\r\n    };\r\n  }, [roomIdState, location]);\r\n\r\n  const startSearch = () => {\r\n    dispatch({ type: \"start-search\" });\r\n  };\r\n\r\n  const receivePlaylists = (data) => {\r\n    dispatch({ type: \"receive-playlists\", playlist: data });\r\n  };\r\n\r\n  const selectPlaylist = (data) => {\r\n    dispatch({ type: \"select-playlist\", playlist: data });\r\n  };\r\n\r\n  const deletePlaylist = (data) => {\r\n    dispatch({ type: \"delete-playlist\" });\r\n  };\r\n  return (\r\n    <LobbyContext.Provider\r\n      value={{\r\n        playlistState,\r\n        startSearch,\r\n        receivePlaylists,\r\n        selectPlaylist,\r\n        deletePlaylist,\r\n        roomIdState,\r\n        setRoomId,\r\n        location,\r\n        roomExists,\r\n        setRoomExists,\r\n      }}\r\n    >\r\n      {children}\r\n    </LobbyContext.Provider>\r\n  );\r\n};\r\n\r\nexport default LobbyContextProvider;\r\n","import React from \"react\";\r\nimport * as firebase from \"firebase\";\r\n\r\nexport const GameRoomContext = React.createContext(null);\r\n\r\nconst GameRoomContextProvider = ({ children }) => {\r\n  const [trackUrl, setTrackUrl] = React.useState(null);\r\n  const [gamePhase, setGamePhase] = React.useState(null);\r\n  const [trackInfo, setTrackInfo] = React.useState(null);\r\n  const [historyArray, setHistoryArray] = React.useState([]);\r\n  const [result, setResult] = React.useState(null);\r\n  const [round, setRound] = React.useState(0);\r\n  const [GameRoomId, setRoomId] = React.useState(null);\r\n  const [gameRoomExists, setGameRoomExists] = React.useState(undefined);\r\n  const [gameStarted, setGameStarted] = React.useState(false);\r\n\r\n  console.log(\"inContextPhase\", gamePhase);\r\n\r\n  React.useEffect(() => {\r\n    const roundRef = firebase.database().ref(`Rooms/${GameRoomId}/round`);\r\n    roundRef.on(\"value\", (snapshot) => {\r\n      setRound(snapshot.val());\r\n    });\r\n\r\n    return () => {\r\n      const roundRef = firebase.database().ref(`Rooms/${GameRoomId}/round`);\r\n      roundRef.off();\r\n    };\r\n  }, [GameRoomId]);\r\n\r\n  React.useEffect(() => {\r\n    if (trackInfo) {\r\n      setHistoryArray([...historyArray, trackInfo]);\r\n    }\r\n  }, [trackInfo]);\r\n\r\n  return (\r\n    <GameRoomContext.Provider\r\n      value={{\r\n        trackUrl,\r\n        setTrackUrl,\r\n        gamePhase,\r\n        setGamePhase,\r\n        trackInfo,\r\n        setTrackInfo,\r\n        result,\r\n        setResult,\r\n        historyArray,\r\n        setHistoryArray,\r\n        round,\r\n        setRound,\r\n        setRoomId,\r\n        gameRoomExists,\r\n        setGameRoomExists,\r\n        gameStarted,\r\n        setGameStarted,\r\n      }}\r\n    >\r\n      {children}\r\n    </GameRoomContext.Provider>\r\n  );\r\n};\r\n\r\nexport default GameRoomContextProvider;\r\n","const COLORS = {\r\n  main: \"rgb(67, 153, 222)\",\r\n  secondary: \"rgb(223, 25, 93)\",\r\n  tertiary: \"#ffc94a\",\r\n  // midnight: \"#893dd4\",\r\n  midnight: \"#6c2fa8\",\r\n};\r\n\r\nexport default COLORS;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport COLORS from \"../../COLORS\";\r\nimport { AiFillGithub } from \"react-icons/ai\";\r\n\r\nconst Background = ({ children }) => {\r\n  return (\r\n    <Wrapper>\r\n      <Shape1></Shape1>\r\n      <Shape2></Shape2>\r\n      <Shape3></Shape3>\r\n      <ChildWrapper>{children}</ChildWrapper>\r\n      <Footer>\r\n        © Mae Berris 2020{\" \"}\r\n        <Link\r\n          href=\"https://github.com/MaeBerris/You-Beat-Me-To-It\"\r\n          target=\"_blank\"\r\n        >\r\n          <AiFillGithub size={20} />\r\n        </Link>\r\n      </Footer>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  background-color: ${COLORS.main};\r\n  position: relative;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Shape1 = styled.div`\r\n  width: 500px;\r\n  height: 800px;\r\n  border-radius: 50%;\r\n  transform: rotate(20deg);\r\n  position: absolute;\r\n  top: -400px;\r\n  left: -100px;\r\n  background-color: ${COLORS.secondary};\r\n`;\r\n\r\nconst Shape2 = styled.div`\r\n  width: 500px;\r\n  height: 500px;\r\n  transform: rotate(55deg);\r\n  position: absolute;\r\n  bottom: -450px;\r\n  right: 300px;\r\n  background-color: ${COLORS.tertiary};\r\n`;\r\n\r\nconst Shape3 = styled.div`\r\n  border-bottom: 400px solid ${COLORS.midnight};\r\n  border-left: 55px solid transparent;\r\n  border-right: 55px solid transparent;\r\n  height: 0px;\r\n  width: 350px;\r\n  position: absolute;\r\n  right: -150px;\r\n  top: 20%;\r\n  transform: rotate(70deg);\r\n`;\r\n\r\nconst ChildWrapper = styled.div`\r\n  position: relative;\r\n  z-index: 3;\r\n  min-height: 100vh;\r\n`;\r\n\r\nconst Footer = styled.div`\r\n  position: absolute;\r\n  color: white;\r\n  right: 15px;\r\n  bottom: 15px;\r\n  font-size: 20px;\r\n  z-index: 3;\r\n`;\r\n\r\nconst Link = styled.a`\r\n  color: white;\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n  margin-left: 5px;\r\n`;\r\nexport default Background;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport COLORS from \"../../COLORS\";\r\n\r\nconst Header = () => {\r\n  return (\r\n    <Wrapper href={\"https://you-beat-me-to-it.netlify.app\"}>\r\n      You <Beat>Beat</Beat> Me To It !\r\n      <Shape />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.a`\r\n  display: block;\r\n  text-decoration: none;\r\n  position: relative;\r\n  text-align: center;\r\n  width: fit-content;\r\n  color: white;\r\n  font-size: 100px;\r\n  font-family: \"Echizen\";\r\n  margin: 0 auto;\r\n  margin-top: 25px;\r\n  margin-bottom: 50px;\r\n  text-shadow: 2px 2px 0px ${COLORS.midnight};\r\n  line-height: 70%;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst Beat = styled.div`\r\n  /* background: linear-gradient(\r\n    to right,\r\n    ${COLORS.tertiary},\r\n    ${COLORS.secondary}\r\n  ); */\r\n  display: block;\r\n  width: fit-content;\r\n  margin: 0 auto;\r\n  /* transform: skew(9deg); */\r\n  padding: 0px 5px;\r\n  color: ${COLORS.midnight};\r\n  text-shadow: 2px 2px 0px white;\r\n  /* border-bottom: 5px solid ${COLORS.midnight}; */\r\n  font-family: \"Echizen\";\r\n`;\r\n\r\nconst Shape = styled.div`\r\n  width: 0;\r\n  height: 0;\r\n  border-left: 150px solid transparent;\r\n  border-right: 150px solid transparent;\r\n  border-bottom: 250px solid #ff33be;\r\n  /* border-bottom: 250px solid ${COLORS.tertiary}; */\r\n  position: absolute;\r\n  z-index: -3;\r\n  top: -20px;\r\n  left: -20px;\r\n`;\r\n\r\n// const Beat = styled.span`\r\n//   background: -webkit-linear-gradient(${COLORS.tertiary}, ${COLORS.secondary});\r\n//   -webkit-background-clip: text;\r\n//   -webkit-text-fill-color: transparent;\r\n//   font-family: \"Echizen\";\r\n// `;\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst GenericLabel = ({ children }) => {\r\n  return (\r\n    <Wrapper>\r\n      <Content>{children}</Content>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  transform: skew(9deg);\r\n  background: white;\r\n  font-size: 40px;\r\n  padding: 5px;\r\n  display: flex;\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  transform: skew(-9deg);\r\n  font-weight: 700;\r\n  color: black;\r\n`;\r\n\r\nexport default GenericLabel;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport COLORS from \"../../COLORS\";\r\n\r\nconst Button = ({ children, handler, disabled }) => {\r\n  return (\r\n    <StyledButton onClick={handler} disabled={disabled}>\r\n      {children}\r\n    </StyledButton>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n\r\nconst StyledButton = styled.button`\r\n  height: 50px;\r\n  border-radius: 30px;\r\n  font-weight: 700;\r\n  padding: 5px 20px;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  color: white;\r\n  border: none;\r\n  background: linear-gradient(\r\n    to right,\r\n    ${COLORS.tertiary},\r\n    ${COLORS.secondary}\r\n  );\r\n  backdrop-filter: none;\r\n  transition: filter 0.3s;\r\n\r\n  :hover {\r\n    filter: saturate(150%);\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { FiLoader } from \"react-icons/fi\";\r\n\r\nconst Spinner = ({ size, color }) => {\r\n  return (\r\n    <Wrapper color={color}>\r\n      <SpinWheel size={size} />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n  color: ${(props) => props.color};\r\n`;\r\n\r\nconst Spin = keyframes`\r\nfrom{\r\n  transform: rotate(0deg)\r\n}to{\r\n  transform: rotate(360deg)\r\n}`;\r\n\r\nconst SpinWheel = styled(FiLoader)`\r\n  animation: ${Spin} 2000ms linear infinite;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport Button from \"../Button/Button\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\nconst SignInHost = ({ buttonHandler, buttonMessage }) => {\r\n  console.log(\"inSignIn\");\r\n  const [nickName, setNickName] = React.useState(\"\");\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState(false);\r\n  const { setCurrentUser } = React.useContext(CurrentUserContext);\r\n  const history = useHistory();\r\n  const { roomId } = useParams();\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Nickname:</GenericLabel>\r\n      <Input\r\n        value={nickName}\r\n        onKeyDown={(ev) => {\r\n          if (ev.key === \"Enter\" && nickName.length >= 1 && !loading) {\r\n            setLoading(true);\r\n            buttonHandler({\r\n              nickName,\r\n              setNickName,\r\n              setCurrentUser,\r\n              history,\r\n              roomId,\r\n              setLoading,\r\n              setError,\r\n            });\r\n          }\r\n        }}\r\n        onChange={(ev) => {\r\n          if (ev.target.value.length > 30) {\r\n          } else {\r\n            setNickName(ev.target.value);\r\n          }\r\n        }}\r\n      />\r\n      <Button\r\n        disabled={nickName.length < 1 || loading}\r\n        handler={() => {\r\n          setLoading(true);\r\n          buttonHandler({\r\n            nickName,\r\n            setNickName,\r\n            setCurrentUser,\r\n            history,\r\n            roomId,\r\n            setLoading,\r\n            setError,\r\n          });\r\n        }}\r\n      >\r\n        {loading ? <Spinner /> : buttonMessage}\r\n      </Button>\r\n      {error && (\r\n        <Error>Something went wrong, please refresh and try again</Error>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  margin-top: 100px;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 400px;\r\n  height: 50px;\r\n  color: black;\r\n  border-radius: 30px;\r\n  border: none;\r\n  text-align: center;\r\n  font-size: 40px;\r\n  margin-bottom: 15px;\r\n\r\n  :focus {\r\n    outline: none;\r\n    box-shadow: 0 0 5px black;\r\n  }\r\n`;\r\n\r\nconst Error = styled.div`\r\n  font-size: 20px;\r\n  color: white;\r\n`;\r\n\r\nexport default SignInHost;\r\n","const hostHandler = ({\r\n  nickName,\r\n  setNickName,\r\n  setCurrentUser,\r\n  history,\r\n  setLoading,\r\n  setError,\r\n}) => {\r\n  setLoading(true);\r\n  fetch(\"https://you-beat-me-to-it.herokuapp.com/createRoom\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify({\r\n      nickName: nickName,\r\n    }),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((res) => {\r\n      if (!res.ok) {\r\n        throw new Error(\"Something went wrong, refresh and try again\");\r\n      }\r\n      return res.json();\r\n    })\r\n    .then((data) => {\r\n      console.log(data);\r\n      setNickName(\"\");\r\n      setCurrentUser(data.userInfo);\r\n      setLoading(false);\r\n      history.push(`/lobby/${data.roomInfo.roomId}`);\r\n    })\r\n    .catch((err) => {\r\n      setLoading(false);\r\n      setError(err);\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport default hostHandler;\r\n","const PlayerHandler = ({\r\n  nickName,\r\n  setNickName,\r\n  setCurrentUser,\r\n  history,\r\n  roomId,\r\n  setLoading,\r\n  setError,\r\n}) => {\r\n  setLoading(true);\r\n  fetch(`https://you-beat-me-to-it.herokuapp.com/${roomId}/createUser`, {\r\n    method: \"POST\",\r\n    body: JSON.stringify({\r\n      nickName: nickName,\r\n    }),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((res) => {\r\n      if (!res.ok) {\r\n        throw new Error(\"Something went wrong, please try again\");\r\n      }\r\n      return res.json();\r\n    })\r\n    .then((data) => {\r\n      setNickName(\"\");\r\n      setLoading(false);\r\n      setCurrentUser(data.userInfo);\r\n    })\r\n    .catch((err) => {\r\n      setLoading(false);\r\n      setError(err);\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport default PlayerHandler;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\n\r\nconst Results = ({ setIsOpen }) => {\r\n  const { playlistState, selectPlaylist } = React.useContext(LobbyContext);\r\n  const [animation, setAnimation] = React.useState(\"open\");\r\n\r\n  if (playlistState.searchResults.length === 0) {\r\n    return (\r\n      <Wrapper\r\n        style={{ height: \"50px\", display: \"flex\", alignItems: \"center\" }}\r\n        animation={animation}\r\n        onAnimationEnd={() => {\r\n          if (animation === \"close\") {\r\n            setIsOpen(false);\r\n          }\r\n        }}\r\n      >\r\n        No Results found\r\n      </Wrapper>\r\n    );\r\n  }\r\n  return (\r\n    <Wrapper\r\n      animation={animation}\r\n      onAnimationEnd={() => {\r\n        if (animation === \"close\") {\r\n          setIsOpen(false);\r\n        }\r\n      }}\r\n    >\r\n      {playlistState.searchResults.map((item) => {\r\n        return (\r\n          <ResultWrapper\r\n            key={item.id}\r\n            onClick={() => {\r\n              selectPlaylist(item);\r\n              // setIsOpen(false);\r\n              setAnimation(\"close\");\r\n            }}\r\n          >\r\n            <Image src={item.picture_medium} />\r\n            <ResultsInfo>\r\n              <Title>{item.title}</Title>\r\n              <Tracks>{item.nb_tracks} tracks</Tracks>\r\n            </ResultsInfo>\r\n          </ResultWrapper>\r\n        );\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Results;\r\n\r\nconst Open = keyframes`\r\nfrom{\r\n  transform: scaleY(0)\r\n}to{\r\n  transform: scaleY(1)\r\n}\r\n`;\r\n\r\nconst Close = keyframes`\r\nfrom{\r\n  transform: scaleY(1)\r\n}to{\r\n  transform: scaleY(0)\r\n}\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  font-size: 30px;\r\n  max-height: 300px;\r\n  overflow: scroll;\r\n  color: black;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  background: white;\r\n  margin-bottom: 15px;\r\n  overflow-x: hidden;\r\n  transform-origin: top;\r\n  animation: ${(props) => (props.animation === \"open\" ? Open : Close)} 220ms\r\n    ease-in-out;\r\n  animation-fill-mode: forwards;\r\n`;\r\n\r\nconst ResultWrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  padding: 10px;\r\n  cursor: pointer;\r\n  :hover {\r\n    background: #eadaf0;\r\n  }\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 75px;\r\n  height: 75px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ResultsInfo = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  width: 90%;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst Tracks = styled.p`\r\n  font-size: 70%;\r\n  font-weight: 400;\r\n  color: lightgrey;\r\n`;\r\n","export const ip = \"https://you-beat-me-to-it.herokuapp.com\";\r\n// export const ip = \"http://localhost:8000\";\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\n// import Button from \"../Button/Button\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport Results from \"./Results\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { ip } from \"../../ip\";\r\n\r\nfunction searchToUrl(searchTerm) {\r\n  const searchArray = searchTerm.split(\" \");\r\n  const searchString = searchArray.join(\"%20\");\r\n  return searchString;\r\n}\r\n\r\nconst Search = () => {\r\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\r\n  const [isOpen, setIsOpen] = React.useState(\"false\");\r\n  const { playlistState, startSearch, receivePlaylists } = React.useContext(\r\n    LobbyContext\r\n  );\r\n  return (\r\n    <SearchPlaylist>\r\n      <GenericLabel>Search for a playlist:</GenericLabel>\r\n      <TopBar>\r\n        <Input\r\n          value={searchTerm}\r\n          placeholder=\"Ex: Best of the 80's\"\r\n          onChange={(ev) => setSearchTerm(ev.target.value)}\r\n          onKeyDown={(ev) => {\r\n            switch (ev.key) {\r\n              case \"Enter\": {\r\n                if (searchTerm.length > 1) {\r\n                  startSearch();\r\n                  let string = searchToUrl(searchTerm);\r\n                  fetch(`${ip}/searchPlaylist?searchTerm=${string}`, {\r\n                    method: \"GET\",\r\n                    headers: {\r\n                      Accept: \"application/json\",\r\n                      \"Content-Type\": \"application/json\",\r\n                    },\r\n                  })\r\n                    .then((res) => res.json())\r\n                    .then((data) => {\r\n                      receivePlaylists(data.searchResults);\r\n                      setIsOpen(true);\r\n                    });\r\n                }\r\n                break;\r\n              }\r\n              default: {\r\n              }\r\n            }\r\n          }}\r\n        />\r\n        {playlistState.loadState === \"loading\" && (\r\n          <SpinnerPosition>\r\n            <Spinner size={35} color={\"grey\"} />\r\n          </SpinnerPosition>\r\n        )}\r\n      </TopBar>\r\n      {playlistState.loadState === \"idle\" &&\r\n      playlistState.searchResults !== null &&\r\n      isOpen === true ? (\r\n        <Results setIsOpen={setIsOpen} />\r\n      ) : null}\r\n    </SearchPlaylist>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n\r\nconst SearchPlaylist = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  width: 100%;\r\n`;\r\n\r\nconst TopBar = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n  width: 100%;\r\n  position: relative;\r\n`;\r\n\r\nconst SpinnerPosition = styled.div`\r\n  width: fit-content;\r\n  position: absolute;\r\n  right: 20px;\r\n  top: 20px;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  height: 55px;\r\n  color: black;\r\n  border-radius: 40px;\r\n  border: none;\r\n  text-align: left;\r\n  font-size: 40px;\r\n  padding: 0 30px;\r\n  margin-top: 10px;\r\n\r\n  :focus {\r\n    outline: none;\r\n    border: 1px solid red;\r\n  }\r\n\r\n  &::placeholder {\r\n    color: #eadaf0;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport { FiX } from \"react-icons/fi\";\r\nimport { ip } from \"../../ip\";\r\n\r\nconst SelectedPlaylist = () => {\r\n  const { playlistState, deletePlaylist } = React.useContext(LobbyContext);\r\n  const { roomId } = useParams();\r\n\r\n  React.useEffect(() => {\r\n    fetch(`${ip}/updatePlaylist`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({\r\n        selectedPlaylist: playlistState.selectedPlaylist,\r\n        roomId: roomId,\r\n      }),\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, [playlistState.selectedPlaylist, roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Selected Playlist:</GenericLabel>\r\n      {Object.values(playlistState.selectedPlaylist).map((item) => {\r\n        return (\r\n          <ResultWrapper key={item.id} onClick={() => {}}>\r\n            <Image src={item.picture_medium} />\r\n            <ResultsInfo>\r\n              <Title>{item.title}</Title>\r\n              <Tracks>{item.nb_tracks} tracks</Tracks>\r\n            </ResultsInfo>\r\n            <Icon\r\n              onClick={(ev) => {\r\n                deletePlaylist(item);\r\n              }}\r\n            >\r\n              <FiX size={35} color={\"lightgray\"} />\r\n            </Icon>\r\n          </ResultWrapper>\r\n        );\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default SelectedPlaylist;\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n  padding-right: 20px;\r\n`;\r\n\r\nconst ResultWrapper = styled.div`\r\n  background: white;\r\n  border-radius: 15px;\r\n  width: fit-content;\r\n  max-width: 100%;\r\n  display: flex;\r\n  padding: 10px;\r\n  position: relative;\r\n  min-width: 50%;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 75px;\r\n  height: 75px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ResultsInfo = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  width: 80%;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst Tracks = styled.p`\r\n  font-size: 70%;\r\n  font-weight: 400;\r\n  color: lightgrey;\r\n`;\r\n\r\nconst Icon = styled.button`\r\n  color: red;\r\n  position: absolute;\r\n  border: none;\r\n  cursor: pointer;\r\n  top: 0;\r\n  right: 0;\r\n  background: none;\r\n`;\r\n","import React, { useRef } from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport COLORS from \"../../COLORS\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { AiFillCrown } from \"react-icons/ai\";\r\nimport addUser from \"../../assets/sounds/add2.mp3\";\r\nimport remove from \"../../assets/sounds/remove2.mp3\";\r\n\r\nfunction usePrevious(value) {\r\n  const ref = useRef();\r\n\r\n  React.useEffect(() => {\r\n    ref.current = value;\r\n  }, [value]); // Only re-run if value changes\r\n\r\n  return ref.current;\r\n}\r\n\r\nconst Users = ({ addUserRef, removeUserRef }) => {\r\n  const { usersList, currentUser, setCurrentRoomId } = React.useContext(\r\n    CurrentUserContext\r\n  );\r\n  const previousPlayers = usePrevious(usersList);\r\n\r\n  const { roomId } = useParams();\r\n  const [isCopied, setIsCopied] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (previousPlayers) {\r\n      if (previousPlayers.length > usersList.length) {\r\n        console.log(\"lost a player\");\r\n        removeUserRef.current.play();\r\n      } else {\r\n        console.log(\"won a player\");\r\n        addUserRef.current.play();\r\n      }\r\n    }\r\n  }, [usersList, addUserRef]);\r\n\r\n  React.useEffect(() => {\r\n    setCurrentRoomId(roomId);\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <audio src={addUser} ref={addUserRef}></audio>\r\n      <audio src={remove} ref={removeUserRef}></audio>\r\n      <GenericLabel>Players:</GenericLabel>\r\n      {usersList !== null ? (\r\n        <List>\r\n          {usersList.map((user, index) => {\r\n            return (\r\n              <User\r\n                key={user.nickName + index}\r\n                style={{\r\n                  color: `${\r\n                    currentUser.playerId === user.playerId\r\n                      ? COLORS.midnight\r\n                      : \"black\"\r\n                  }`,\r\n                }}\r\n              >\r\n                {user.role === \"host\" ? (\r\n                  <Icon>\r\n                    <AiFillCrown />\r\n                  </Icon>\r\n                ) : null}\r\n                {user.nickName}\r\n              </User>\r\n            );\r\n          })}\r\n          <StyledButton\r\n            isCopied={isCopied}\r\n            onClick={() => {\r\n              setIsCopied(true);\r\n              navigator.clipboard.writeText(window.location);\r\n            }}\r\n            onAnimationEnd={() => {\r\n              setIsCopied(false);\r\n            }}\r\n          >\r\n            {isCopied ? \"Copied !\" : \"Copy Invite Link\"}\r\n          </StyledButton>\r\n        </List>\r\n      ) : null}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n`;\r\n\r\nconst List = styled.div`\r\n  background: white;\r\n  border-radius: 15px;\r\n  padding: 10px 30px;\r\n  min-width: 50%;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nconst User = styled.div`\r\n  margin-bottom: 5px;\r\n  position: relative;\r\n`;\r\n\r\nconst Icon = styled.div`\r\n  width: fit-content;\r\n  position: absolute;\r\n  left: 0;\r\n  transform: translateX(-100%);\r\n  margin: 0;\r\n`;\r\n\r\nconst ColorsAnimation = keyframes`\r\n0%{\r\n  background-position: 0% 0%;\r\n  );\r\n}20%{\r\n  background-position: 100% 0%;\r\n} 80% {\r\n  background-position: 100% 0%;\r\n}\r\n100%{\r\n  background-position: 0% 0%;\r\n}`;\r\n\r\nconst StyledButton = styled.button`\r\n  height: 50px;\r\n  border-radius: 30px;\r\n  font-weight: 700;\r\n  width: 80%;\r\n  padding: 5px 20px;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  color: white;\r\n  border: none;\r\n  background: linear-gradient(\r\n    to right,\r\n    ${COLORS.tertiary},\r\n    ${COLORS.secondary},\r\n    #34eb98,\r\n    #34eb98,\r\n    #34eb98\r\n  );\r\n  background-size: 300% 100%;\r\n  overflow: hidden;\r\n  animation: ${(Props) => (Props.isCopied ? ColorsAnimation : null)} 2000ms\r\n    ease-in-out;\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport * as firebase from \"firebase\";\r\n\r\nconst SelectedPlaylistPlayer = () => {\r\n  const { playlistState, selectPlaylist, deletePlaylist } = React.useContext(\r\n    LobbyContext\r\n  );\r\n  const { roomId } = useParams();\r\n\r\n  React.useEffect(() => {\r\n    const selectedPlaylistRef = firebase\r\n      .database()\r\n      .ref(`Rooms/${roomId}/selectedPlaylist`);\r\n\r\n    selectedPlaylistRef.on(\"value\", (snapshot) => {\r\n      const playlist = snapshot.val();\r\n\r\n      if (playlist === false) {\r\n        deletePlaylist();\r\n      } else if (playlist) {\r\n        selectPlaylist(Object.values(playlist)[0]);\r\n      }\r\n    });\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Selected Playlist:</GenericLabel>\r\n      {Object.values(playlistState.selectedPlaylist).map((item) => {\r\n        return (\r\n          <ResultWrapper key={item.id}>\r\n            <Image src={item.picture_medium} />\r\n            <ResultsInfo>\r\n              <Title>{item.title}</Title>\r\n              <Tracks>{item.nb_tracks} tracks</Tracks>\r\n            </ResultsInfo>\r\n          </ResultWrapper>\r\n        );\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default SelectedPlaylistPlayer;\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n  padding-right: 20px;\r\n`;\r\n\r\nconst ResultWrapper = styled.div`\r\n  background: white;\r\n  border-radius: 15px;\r\n  width: fit-content;\r\n  max-width: 100%;\r\n  display: flex;\r\n  padding: 10px;\r\n  position: relative;\r\n  min-width: 50%;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 75px;\r\n  height: 75px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ResultsInfo = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  width: 80%;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst Tracks = styled.p`\r\n  font-size: 70%;\r\n  font-weight: 400;\r\n  color: lightgrey;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { FiVolume, FiVolumeX, FiVolume1, FiVolume2 } from \"react-icons/fi\";\r\n\r\nconst VolumeButton = ({ volume, setVolume }) => {\r\n  return (\r\n    <SlidderWrapper>\r\n      <Button\r\n        onClick={() => {\r\n          if (volume > 0) {\r\n            setVolume(0);\r\n            return;\r\n          }\r\n          if (volume === 0) {\r\n            setVolume(0.5);\r\n            return;\r\n          }\r\n        }}\r\n      >\r\n        {volume === 0.5 && <FiVolume size={35} />}\r\n        {volume === 0 && <FiVolumeX size={35} />}\r\n        {volume < 0.5 && volume > 0 && <FiVolume1 size={35} />}\r\n        {volume > 0.5 && <FiVolume2 size={35} />}\r\n      </Button>\r\n      <Slider\r\n        type=\"range\"\r\n        min=\"0\"\r\n        max=\"100\"\r\n        value={volume * 100}\r\n        onChange={(ev) => {\r\n          setVolume(ev.target.value / 100);\r\n        }}\r\n      />\r\n    </SlidderWrapper>\r\n  );\r\n};\r\n\r\nexport default VolumeButton;\r\n\r\nconst Slider = styled.input`\r\n  width: 100%;\r\n`;\r\n\r\nconst SlidderWrapper = styled.div`\r\n  display: flex;\r\n  padding: 5px;\r\n  align-items: center;\r\n  background: white;\r\n  border-radius: 10px;\r\n  width: 55px;\r\n  transition: width 1s, opacity 1s;\r\n  margin-bottom: 15px;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 40px;\r\n\r\n  input:nth-child(2) {\r\n    opacity: 0;\r\n    transition: opacity 0.8s;\r\n  }\r\n\r\n  :hover {\r\n    width: 200px;\r\n    input:nth-child(2) {\r\n      opacity: 1;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Button = styled.button`\r\n  background: none;\r\n  border: none;\r\n  width: 50px;\r\n  height: 50px;\r\n  cursor: pointer;\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport COLORS from \"../../COLORS\";\r\nimport Search from \"./Search\";\r\nimport SelectedPlaylist from \"./SelectedPlaylist\";\r\nimport Users from \"./Users\";\r\nimport SelectedPlaylistPlayer from \"./SelectedPlaylistPlayer\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport VolumeButton from \"../Button/VolumeButton\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { ip } from \"../../ip\";\r\n//added a comment\r\nconst validatePlaylist = async (roomId, playlist) => {\r\n  const promise = await new Promise((resolve, reject) => {\r\n    fetch(`${ip}/validatePlaylist`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({ roomId, selectedPlaylist: playlist }),\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n        resolve(data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        reject(err);\r\n      });\r\n  });\r\n\r\n  return promise;\r\n};\r\n\r\nconst HostLobby = () => {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState(false);\r\n  const { currentUser } = React.useContext(CurrentUserContext);\r\n  const { playlistState, location } = React.useContext(LobbyContext);\r\n  const { gameStarted } = React.useContext(GameRoomContext);\r\n  const { roomId } = useParams();\r\n  const history = useHistory();\r\n  const addUserRef = React.useRef(null);\r\n  const removeUserRef = React.useRef(null);\r\n  const [volume, setVolume] = React.useState(0.5);\r\n\r\n  React.useEffect(() => {\r\n    if (addUserRef.current && removeUserRef.current) {\r\n      addUserRef.current.volume = volume;\r\n      removeUserRef.current.volume = volume;\r\n    }\r\n  }, [addUserRef, removeUserRef, volume]);\r\n\r\n  React.useEffect(() => {\r\n    if (location === \"gameRoom\" && gameStarted === false) {\r\n      history.push(`/gameroom/${roomId}`);\r\n    }\r\n  }, [roomId, location]);\r\n\r\n  if (currentUser.role === \"player\") {\r\n    return (\r\n      <Wrapper>\r\n        <VolumeButton volume={volume} setVolume={setVolume} />\r\n        <BottomSection>\r\n          <SelectedPlaylistPlayer />\r\n          <Users addUserRef={addUserRef} removeUserRef={removeUserRef} />\r\n        </BottomSection>\r\n        <Text>\r\n          Please wait for the host to select a playlist and to start game ...\r\n        </Text>\r\n      </Wrapper>\r\n    );\r\n  }\r\n  return (\r\n    <Wrapper>\r\n      <VolumeButton volume={volume} setVolume={setVolume} />\r\n      <Search />\r\n      <BottomSection>\r\n        <SelectedPlaylist />\r\n        <Users removeUserRef={removeUserRef} addUserRef={addUserRef} />\r\n      </BottomSection>\r\n      <ButtonWrapper>\r\n        {error && <ErrorMessage>Please select a playlist</ErrorMessage>}\r\n        <BigButton\r\n          onClick={async () => {\r\n            if (Object.keys(playlistState.selectedPlaylist).length > 0) {\r\n              setError(false);\r\n              setLoading(true);\r\n              await validatePlaylist(roomId, playlistState.selectedPlaylist);\r\n            } else {\r\n              setError(true);\r\n            }\r\n          }}\r\n        >\r\n          {loading ? <Spinner /> : \"Start Game\"}\r\n        </BigButton>\r\n      </ButtonWrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\nconst Wrapper = styled.div`\r\n  margin-top: 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0 40px;\r\n  /* align-items: center; */\r\n`;\r\n\r\nconst BottomSection = styled.div`\r\n  margin-top: 20px;\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: 50% 50%;\r\n`;\r\n\r\nconst ButtonWrapper = styled.div`\r\n  margin: 50px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  position: relative;\r\n`;\r\n\r\nconst BigButton = styled.button`\r\n  border-radius: 30px;\r\n  /* font-weight: 700; */\r\n  /* font-family: \"Echizen\"; */\r\n  font-size: 40px;\r\n  padding: 5px 20px;\r\n  cursor: pointer;\r\n  color: white;\r\n  border: none;\r\n  background: linear-gradient(to right, #ff33be, ${COLORS.midnight});\r\n  transition: filter 0.3s;\r\n\r\n  :hover {\r\n    filter: saturate(150%);\r\n  }\r\n  :focus {\r\n    outline: none;\r\n    border: 1px solid white;\r\n    border-radius: 30px;\r\n  }\r\n`;\r\n\r\nconst ErrorAnimation = keyframes`\r\nfrom{\r\n  opacity: 0;\r\n  transform: translateY(100%)\r\n}to{\r\n  opacity: 1;\r\n  transform: translateY(0%)\r\n}`;\r\n\r\nconst ErrorMessage = styled.div`\r\n  font-size: 20px;\r\n  color: white;\r\n  animation: ${ErrorAnimation} 200ms ease-in-out;\r\n  position: absolute;\r\n  top: -25px;\r\n`;\r\n\r\nconst Text = styled.div`\r\n  font-family: \"Echizen\";\r\n  font-size: 60px;\r\n  text-align: center;\r\n  color: white;\r\n  margin: 50px 0;\r\n  text-shadow: 2px 2px 2px ${COLORS.midnight};\r\n`;\r\n\r\nexport default HostLobby;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Label from \"../Labels/GenericLabel\";\r\nimport COLORS from \"../../COLORS\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\n\r\nconst ErrorScreen = ({ title, message, spinner }) => {\r\n  return (\r\n    <Wrapper>\r\n      <Label>{title}</Label>\r\n      <Message>{message}</Message>\r\n      {spinner && <Spinner color={COLORS.midnight} size={40} />}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default ErrorScreen;\r\n\r\nconst Wrapper = styled.div`\r\n  margin-top: 50px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Message = styled.div`\r\n  margin-top: 5px;\r\n  font-family: \"Echizen\";\r\n  text-shadow: 2px 2px ${COLORS.midnight};\r\n  color: white;\r\n  font-size: 40px;\r\n  width: 60%;\r\n  text-align: center;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Label from \"../Labels/GenericLabel\";\r\nimport COLORS from \"../../COLORS\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst GameInProgress = () => {\r\n  const { roomId } = useParams();\r\n  const { round, setRoomId } = React.useContext(GameRoomContext);\r\n  React.useEffect(() => {\r\n    setRoomId(roomId);\r\n  }, []);\r\n  return (\r\n    <Wrapper>\r\n      <Label>The Game is in Progress</Label>\r\n      <Message>\r\n        Please be patient while the game is in progress. You will be able to\r\n        join when the game ends and the host returns to the lobby.\r\n      </Message>\r\n      <RoundCounter>\r\n        The game you are trying to join is on round :{\" \"}\r\n        <RoundSpan>\r\n          {\" \"}\r\n          {round <= 9 ? round + 1 : round}\r\n          /10\r\n        </RoundSpan>\r\n      </RoundCounter>\r\n      <Spinner color={COLORS.midnight} size={40} />\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default GameInProgress;\r\n\r\nconst Wrapper = styled.div`\r\n  margin-top: 50px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Message = styled.div`\r\n  margin-top: 5px;\r\n  font-family: \"Echizen\";\r\n  text-shadow: 2px 2px ${COLORS.midnight};\r\n  color: white;\r\n  font-size: 40px;\r\n  width: 60%;\r\n  text-align: center;\r\n`;\r\n\r\nconst RoundCounter = styled.div`\r\n  margin-top: 10px;\r\n  font-family: \"Echizen\";\r\n  text-shadow: 2px 2px ${COLORS.midnight};\r\n  color: white;\r\n  font-size: 40px;\r\n  width: 60%;\r\n  text-align: center;\r\n`;\r\n\r\nconst RoundSpan = styled.span`\r\n  font-size: 40px;\r\n  color: ${COLORS.secondary};\r\n  text-shadow: 2px 2px white;\r\n  font-family: \"Echizen\";\r\n`;\r\n","import React from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport PlayerHandler from \"../SignIn/PlayerHandler\";\r\nimport SignIn from \"../SignIn/SignIn\";\r\nimport HostLobby from \"../Lobby/HostLobby\";\r\nimport ErrorScreen from \"../ErrorScreen/ErrorScreen\";\r\nimport GameInProgress from \"../ErrorScreen/GameInProgress\";\r\nimport * as firebase from \"firebase\";\r\n\r\nconst LobbyWrapper = () => {\r\n  const { currentUser, isHostPresent, setCurrentRoomId } = React.useContext(\r\n    CurrentUserContext\r\n  );\r\n  const { setRoomId, roomExists, setRoomExists, location } = React.useContext(\r\n    LobbyContext\r\n  );\r\n\r\n  const { roomId } = useParams();\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    const roomRef = firebase.database().ref(`Rooms/${roomId}`);\r\n\r\n    roomRef.on(\"value\", (snapshot) => {\r\n      setRoomExists(snapshot.exists());\r\n    });\r\n\r\n    return () => {\r\n      roomRef.off();\r\n    };\r\n  }, [roomId]);\r\n\r\n  React.useEffect(() => {\r\n    setRoomId(roomId);\r\n    setCurrentRoomId(roomId);\r\n  }, [roomId]);\r\n\r\n  React.useEffect(() => {\r\n    console.log(history.action);\r\n\r\n    return () => {\r\n      console.log(history.action);\r\n      if (history.action === \"POP\" && location === \"lobby\") {\r\n        history.push(\"/\");\r\n        window.location.replace(\"/\");\r\n        return;\r\n      }\r\n    };\r\n  }, [history, location]);\r\n\r\n  if (roomExists === false) {\r\n    return (\r\n      <ErrorScreen\r\n        title=\"404 - Room not found\"\r\n        message=\"We're sorry, we couldn't find the room you are trying to join\"\r\n      />\r\n    );\r\n  }\r\n  if (isHostPresent === false) {\r\n    return (\r\n      <ErrorScreen\r\n        title=\"The host has left\"\r\n        message=\"We're sorry, the host has left and the game has ended. Return to the homepage to start a new game.\"\r\n      />\r\n    );\r\n  }\r\n  if (\r\n    !currentUser &&\r\n    roomExists === true &&\r\n    isHostPresent === true &&\r\n    location === \"gameRoom\"\r\n  ) {\r\n    return <GameInProgress />;\r\n  }\r\n  if (\r\n    !currentUser &&\r\n    roomExists === true &&\r\n    isHostPresent === true &&\r\n    location === \"lobby\"\r\n  ) {\r\n    return (\r\n      <SignIn\r\n        buttonHandler={PlayerHandler}\r\n        buttonMessage=\"Join your friends game !\"\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {roomExists === true && isHostPresent === true && currentUser ? (\r\n        <HostLobby />\r\n      ) : (\r\n        <Spinner size={50} color={\"lightgrey\"} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LobbyWrapper;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\n\r\nconst ProgressBar = ({ time }) => {\r\n  const { gamePhase } = React.useContext(GameRoomContext);\r\n  const { currentTrackGuesses } = React.useContext(CurrentUserContext);\r\n  const barRef = React.useRef(null);\r\n\r\n  const calculateGuessPosition = (time) => {\r\n    if (barRef !== null) {\r\n      let position = (time * barRef.current.clientWidth) / 31;\r\n      position.toFixed(0);\r\n      return position;\r\n    }\r\n  };\r\n  return (\r\n    <Wrapper>\r\n      <Bar gamePhase={gamePhase} ref={barRef} time={time}></Bar>\r\n      {currentTrackGuesses &&\r\n        Object.values(currentTrackGuesses).map((guess) => {\r\n          if (guess.artist && guess.songName) {\r\n            return (\r\n              <Guess\r\n                position={calculateGuessPosition(guess.time)}\r\n                key={guess.nickName}\r\n              >\r\n                {guess.nickName}\r\n                <Tip />\r\n              </Guess>\r\n            );\r\n          }\r\n        })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default ProgressBar;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  background: #eadaf0;\r\n  height: 10px;\r\n  border-radius: 40px;\r\n  margin-top: 10px;\r\n  position: relative;\r\n`;\r\n\r\nconst Transform = (time) => keyframes`\r\n0%{\r\n  transform:scaleX(${time / 30})\r\n}100%{\r\n  transform: scaleX(0)\r\n}\r\n`;\r\nconst Bar = styled.div`\r\n  height: 10px;\r\n  width: 100%;\r\n  border-radius: 40px;\r\n  background: #ff33be;\r\n  transform-origin: right;\r\n  animation: ${(props) =>\r\n      props.gamePhase === \"playing\" ? Transform(props.time) : null}\r\n    ${(props) => props.time * 1030}ms linear;\r\n`;\r\n\r\nconst Guess = styled.div`\r\n  max-width: 150px;\r\n  min-width: 90px;\r\n  font-size: 15px;\r\n  text-align: center;\r\n  border-radius: 10px;\r\n  height: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: white;\r\n  margin-top: 10px;\r\n  position: absolute;\r\n  top: 10px;\r\n  left: ${(props) => props.position}px;\r\n  transform: translateX(-50%);\r\n  z-index: 5;\r\n`;\r\n\r\nconst Tip = styled.div`\r\n  position: absolute;\r\n  z-index: -5;\r\n  background: white;\r\n  height: 30px;\r\n  width: 30px;\r\n  transform: rotate(45deg) translateX(-20%) translateY(-20%);\r\n`;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport cassette from \"../../assets/cassette.png\";\r\nimport COLORS from \"../../COLORS\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\n\r\nconst Cassette = ({ time }) => {\r\n  const { result, trackInfo, gamePhase } = React.useContext(GameRoomContext);\r\n  const [artist, setArtist] = React.useState(null);\r\n  const [songName, setSongName] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    if (gamePhase === \"loading\") {\r\n      setArtist(null);\r\n      setSongName(null);\r\n    }\r\n    if (result === \"success\") {\r\n      setArtist(trackInfo.artist.name);\r\n      setSongName(trackInfo.title_short);\r\n    }\r\n    if (result === \"artist\") {\r\n      setArtist(trackInfo.artist.name);\r\n    }\r\n    if (result === \"songName\") {\r\n      setSongName(trackInfo.title_short);\r\n    }\r\n  }, [result, gamePhase]);\r\n\r\n  return (\r\n    <MasterWrapper>\r\n      <Wrapper>\r\n        <Image src={cassette}></Image>\r\n        <Counter>{time}</Counter>\r\n        <CogWrapper gamePhase={gamePhase}>\r\n          <Cog>\r\n            <Peg1></Peg1>\r\n            <Peg2 />\r\n            <Peg3></Peg3>\r\n            <Peg4 />\r\n          </Cog>\r\n        </CogWrapper>\r\n        <CogWrapper2 gamePhase={gamePhase}>\r\n          <Cog>\r\n            <Peg1></Peg1>\r\n            <Peg2 />\r\n            <Peg3></Peg3>\r\n            <Peg4 />\r\n          </Cog>\r\n        </CogWrapper2>\r\n        <Label>\r\n          <SongName>\r\n            <PlaceHolder>\r\n              {songName && (\r\n                <SongNameSpan songName={songName}>\r\n                  {songName && songName}\r\n                </SongNameSpan>\r\n              )}\r\n            </PlaceHolder>\r\n\r\n            <Separator>/</Separator>\r\n            <PlaceHolder>\r\n              {artist && (\r\n                <ArtistSpan artist={artist}>{artist && artist}</ArtistSpan>\r\n              )}\r\n            </PlaceHolder>\r\n          </SongName>\r\n        </Label>\r\n      </Wrapper>\r\n    </MasterWrapper>\r\n  );\r\n};\r\n\r\nexport default Cassette;\r\n\r\nconst MasterWrapper = styled.div`\r\n  height: 340px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  position: relative;\r\n  margin-bottom: -50px;\r\n  /* margin-top: 50px; */\r\n  transform: scale(0.8);\r\n`;\r\n\r\nconst Appear = keyframes`\r\nfrom{\r\n  width: 0;\r\n}\r\nto{\r\n  width: 100%;\r\n}`;\r\n\r\nconst SongNameSpan = styled.div`\r\n  font-family: \"Permanent Marker\", cursive;\r\n  /* font-family: \"Echizen\"; */\r\n  color: black;\r\n  /* width: 250px; */\r\n\r\n  max-width: 100%;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 20px;\r\n  transform-origin: left;\r\n  line-height: 2.3;\r\n  animation: ${(props) =>\r\n      props.songName !== null || props.artist !== null ? Appear : null}\r\n    500ms;\r\n`;\r\n\r\nconst ArtistSpan = styled.div`\r\n  font-family: \"Permanent Marker\", cursive;\r\n  /* font-family: \"Echizen\"; */\r\n  color: black;\r\n  /* width: 250px; */\r\n  max-width: 100%;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 20px;\r\n  transform-origin: left;\r\n  line-height: 2.3;\r\n  animation: ${(props) =>\r\n      props.songName !== null || props.artist !== null ? Appear : null}\r\n    500ms ease-in-out;\r\n`;\r\nconst PlaceHolder = styled.div`\r\n  width: 50%;\r\n  max-width: 50%;\r\n`;\r\n\r\nconst Separator = styled.div`\r\n  font-family: \"Echizen\";\r\n`;\r\nconst Image = styled.img`\r\n  filter: invert(21%) sepia(23%) saturate(7482%) hue-rotate(259deg)\r\n    brightness(87%) contrast(91%);\r\n`;\r\n\r\nconst Counter = styled.div`\r\n  width: fit-content;\r\n  position: absolute;\r\n  top: 140px;\r\n  font-size: 60px;\r\n  color: ${COLORS.midnight};\r\n  font-family: \"Digital\";\r\n`;\r\n\r\nconst Spin = keyframes`\r\nfrom{\r\n  transform: rotate(0deg)\r\n}to{\r\n  transform: rotate(360deg)\r\n}`;\r\n\r\nconst CogWrapper2 = styled.div`\r\n  width: fit-content;\r\n  position: absolute;\r\n  top: 134px;\r\n  right: 141px;\r\n  animation: ${Spin} 2000ms linear infinite forwards;\r\n  animation-play-state: ${(props) =>\r\n    props.gamePhase === \"playing\" ? \"running\" : \"paused\"};\r\n`;\r\n\r\nconst CogWrapper = styled.div`\r\n  width: fit-content;\r\n  position: absolute;\r\n  top: 135px;\r\n  left: 135px;\r\n  /* animation: ${(props) =>\r\n    props.gamePhase === \"playing\" ? Spin : null} 2000ms\r\n    linear infinite forwards; */\r\n  animation: ${Spin} 2000ms linear infinite forwards;\r\n  animation-play-state: ${(props) =>\r\n    props.gamePhase === \"playing\" ? \"running\" : \"paused\"};\r\n`;\r\n\r\nconst Cog = styled.div`\r\n  position: relative;\r\n  width: 70px;\r\n  height: 70px;\r\n  border-radius: 50%;\r\n  border: 4px solid ${COLORS.midnight};\r\n`;\r\n\r\nconst Peg1 = styled.div`\r\n  position: absolute;\r\n  border-left: 4px solid ${COLORS.midnight};\r\n  height: 15px;\r\n  border-radius: 3px;\r\n  left: 50%;\r\n  bottom: -3px;\r\n  transform: translateX(-2px);\r\n`;\r\n\r\nconst Peg2 = styled.div`\r\n  position: absolute;\r\n  border-left: 4px solid ${COLORS.midnight};\r\n  border-radius: 3px;\r\n  height: 15px;\r\n  left: 50%;\r\n  top: -3px;\r\n  transform: translateX(-2px);\r\n`;\r\n\r\nconst Peg3 = styled.div`\r\n  position: absolute;\r\n  border-bottom: 4px solid ${COLORS.midnight};\r\n  border-radius: 3px;\r\n  width: 15px;\r\n  left: -3px;\r\n  top: 50%;\r\n  transform: translateY(-2px);\r\n`;\r\n\r\nconst Peg4 = styled.div`\r\n  position: absolute;\r\n  border-bottom: 4px solid ${COLORS.midnight};\r\n  border-radius: 3px;\r\n  width: 15px;\r\n  right: -3px;\r\n  top: 50%;\r\n  transform: translateY(-2px);\r\n`;\r\n\r\nconst Label = styled.div`\r\n  border: 4px solid ${COLORS.midnight};\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: white;\r\n  position: absolute;\r\n  width: 500px;\r\n  padding: 10px 50px;\r\n  top: 45px;\r\n  /* text-shadow: 2px 2px 2px ${COLORS.midnight}; */\r\n`;\r\n\r\nconst SongName = styled.div`\r\n  border-bottom: 2px solid ${COLORS.midnight};\r\n  height: 35px;\r\n  font-family: \"Echizen\";\r\n  display: flex;\r\n  /* justify-content: center; */\r\n  color: black;\r\n  text-align: center;\r\n  font-size: 40px;\r\n`;\r\n","import leven from \"leven\";\r\n\r\nconst calculateDistance = (searchTerm, artistOrSongName, valueToSearch) => {\r\n  const artistOrSong = artistOrSongName.toLowerCase();\r\n  const wordsArray = searchTerm.toLowerCase().split(\" \");\r\n  let allSubStrings = [...wordsArray];\r\n\r\n  wordsArray.forEach((word, index) => {\r\n    let string = \"\";\r\n    for (let i = 0; i <= index; i++) {\r\n      string = string + \" \" + wordsArray[i];\r\n    }\r\n    allSubStrings.push(string.trim());\r\n  });\r\n\r\n  wordsArray.forEach((word, index) => {\r\n    let newArray = wordsArray.slice(index);\r\n    allSubStrings.push(newArray.join(\" \").trim());\r\n  });\r\n  let ArtistResultMap = allSubStrings.map((item) => {\r\n    return {\r\n      searchTerm: item,\r\n      searchingFor: valueToSearch,\r\n      distance: leven(item, `${artistOrSong}`),\r\n    };\r\n  });\r\n  ArtistResultMap = ArtistResultMap.sort((a, b) => {\r\n    return a.distance - b.distance;\r\n  });\r\n\r\n  let marginOfError = Math.floor((artistOrSong.length / 10) * 4);\r\n  if (marginOfError > 5) {\r\n    marginOfError = 5;\r\n  }\r\n\r\n  if (ArtistResultMap[0].distance < marginOfError) {\r\n    return {\r\n      [`${valueToSearch}`]: true,\r\n      distance: ArtistResultMap[0].distance,\r\n      marginOfError: marginOfError,\r\n    };\r\n  } else {\r\n    return {\r\n      [`${valueToSearch}`]: false,\r\n      distance: ArtistResultMap[0].distance,\r\n      marginOfError: marginOfError,\r\n    };\r\n  }\r\n};\r\n\r\n// const levenTestResult = calculateDistance(\r\n//   \"the beatles\",\r\n//   \"the beach boys\",\r\n//   \"songName\"\r\n// );\r\n\r\n// console.log(levenTestResult);\r\n\r\nexport default calculateDistance;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport calculateDistance from \"./LevenTest\";\r\nimport wrong from \"../../assets/sounds/wrong.mp3\";\r\nimport correct from \"../../assets/sounds/correct.mp3\";\r\nimport success from \"../../assets/sounds/success.mp3\";\r\nimport { ip } from \"../../ip\";\r\n\r\nfunction fetchHelper(roomId, currentUser, correctGuess) {\r\n  fetch(`${ip}/validateAnswer`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify({\r\n      currentUser: currentUser,\r\n      roomId: roomId,\r\n      correctGuess,\r\n    }),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => console.log(data))\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nconst SearchBar = ({ wrongRef, correctRef, successRef }) => {\r\n  const { roomId } = useParams();\r\n  const { currentUser, correctGuess, setCorrectGuess } = React.useContext(\r\n    CurrentUserContext\r\n  );\r\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\r\n  const [placeHolderText, setPlaceHolderText] = React.useState(\r\n    \"Prepare for your first song !\"\r\n  );\r\n\r\n  const { gamePhase, result, setResult, trackInfo, round } = React.useContext(\r\n    GameRoomContext\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (gamePhase === \"loading\") {\r\n      setCorrectGuess({ artist: false, songName: false });\r\n      setResult(null);\r\n      setSearchTerm(\"\");\r\n\r\n      if (round === 10) {\r\n        setPlaceHolderText(\"Prepare for final ranking !\");\r\n        return;\r\n      }\r\n      if (round === 0) {\r\n        setPlaceHolderText(\"Prepare for your first song !\");\r\n        return;\r\n      }\r\n      setPlaceHolderText(\"Prepare for next song !\");\r\n    }\r\n    if (gamePhase === \"playing\") {\r\n      setPlaceHolderText(\"Guess the song and the artist !\");\r\n    }\r\n  }, [gamePhase, round]);\r\n\r\n  React.useEffect(() => {\r\n    if (result === \"success\") {\r\n      setPlaceHolderText(\"You got the correct answer !\");\r\n    }\r\n    if (result === \"artist\") {\r\n      setPlaceHolderText(\"Now guess the song name !\");\r\n    }\r\n    if (result === \"songName\") {\r\n      setPlaceHolderText(\"Now guess the artist !\");\r\n    }\r\n  }, [result]);\r\n\r\n  React.useEffect(() => {\r\n    if (result === \"fail\" && wrongRef.current) {\r\n      wrongRef.current.play();\r\n    }\r\n    if (result === \"artist\" || (result === \"songName\" && correctRef.current)) {\r\n      correctRef.current.play();\r\n    }\r\n    if (result === \"success\" && successRef.current) {\r\n      successRef.current.play();\r\n    }\r\n  }, [result, wrongRef, correctRef, successRef]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <audio ref={wrongRef} src={wrong} />\r\n      <audio ref={correctRef} src={correct} />\r\n      <audio ref={successRef} src={success} />\r\n      <Input\r\n        result={result}\r\n        value={searchTerm}\r\n        placeholder={placeHolderText}\r\n        onChange={(ev) => {\r\n          setSearchTerm(ev.target.value);\r\n        }}\r\n        onAnimationEnd={(ev) => {\r\n          setResult(null);\r\n        }}\r\n        onKeyDown={(ev) => {\r\n          if (\r\n            ev.key === \"Enter\" &&\r\n            gamePhase === \"playing\" &&\r\n            result !== \"success\"\r\n          ) {\r\n            const artist = trackInfo.artist.name.toLowerCase();\r\n\r\n            const songName = trackInfo.title_short\r\n              .split(\"(\")[0]\r\n              .toLowerCase()\r\n              .trim();\r\n\r\n            const artistResult = calculateDistance(\r\n              searchTerm,\r\n              artist,\r\n              \"artist\"\r\n            );\r\n            const songNameResult = calculateDistance(\r\n              searchTerm,\r\n              songName,\r\n              \"songName\"\r\n            );\r\n            const d = new Date();\r\n            const timeStamp = d.getTime();\r\n\r\n            setSearchTerm(\"\");\r\n\r\n            if (\r\n              artistResult.artist === false &&\r\n              songNameResult.songName === false\r\n            ) {\r\n              setResult(\"fail\");\r\n              return;\r\n            }\r\n\r\n            if (artistResult.artist && songNameResult.songName) {\r\n              setResult(\"success\");\r\n              setCorrectGuess({\r\n                artist: true,\r\n                songName: true,\r\n              });\r\n              fetchHelper(roomId, currentUser, {\r\n                artist: true,\r\n                songName: true,\r\n                timeStamp: timeStamp,\r\n                previousGuess: correctGuess,\r\n              });\r\n              return;\r\n            }\r\n\r\n            if (artistResult.artist) {\r\n              if (\r\n                correctGuess.songName === true &&\r\n                correctGuess.artist === false\r\n              ) {\r\n                setResult(\"success\");\r\n                setCorrectGuess({ artist: true, songName: true });\r\n                fetchHelper(roomId, currentUser, {\r\n                  artist: true,\r\n                  songName: true,\r\n                  timeStamp: timeStamp,\r\n                  previousGuess: correctGuess,\r\n                });\r\n                return;\r\n              }\r\n              setResult(\"artist\");\r\n              setCorrectGuess({ artist: true, songName: false });\r\n              fetchHelper(roomId, currentUser, {\r\n                artist: true,\r\n                songName: false,\r\n                timeStamp: null,\r\n                previousGuess: correctGuess,\r\n              });\r\n              return;\r\n            }\r\n\r\n            if (songNameResult.songName) {\r\n              if (\r\n                correctGuess.songName === false &&\r\n                correctGuess.artist === true\r\n              ) {\r\n                setResult(\"success\");\r\n                setCorrectGuess({ artist: true, songName: true });\r\n                fetchHelper(roomId, currentUser, {\r\n                  artist: true,\r\n                  songName: true,\r\n                  timeStamp: timeStamp,\r\n                  previousGuess: correctGuess,\r\n                });\r\n                return;\r\n              }\r\n              setResult(\"songName\");\r\n              setCorrectGuess({ artist: false, songName: true });\r\n              fetchHelper(roomId, currentUser, {\r\n                artist: false,\r\n                songName: true,\r\n                timeStamp: null,\r\n                previousGuess: correctGuess,\r\n              });\r\n              return;\r\n            }\r\n          }\r\n        }}\r\n      />\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default SearchBar;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Fail = keyframes`\r\n0%{\r\n  transform: translateX(0)\r\n}\r\n20%{\r\n  transform: translateX(15px)\r\n}\r\n40%{\r\n  transform: translateX(0px)\r\n}\r\n60%{\r\n  transform: translateX(-15px)\r\n}\r\n100%{\r\n  transform: translateX(0px)\r\n}\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  height: 55px;\r\n  color: black;\r\n  border-radius: 40px;\r\n  border: none;\r\n  text-align: left;\r\n  font-size: 40px;\r\n  padding: 0 30px;\r\n  margin-top: 10px;\r\n\r\n  &::placeholder {\r\n    color: ${(props) => (props.result === \"success\" ? \" #34eb98\" : \"#eadaf0\")};\r\n  }\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n\r\n  animation: ${(props) => (props.result === \"fail\" ? Fail : null)} 500ms\r\n    ease-in-out;\r\n`;\r\n","import React from \"react\";\r\nimport COLORS from \"../../COLORS\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst PreviousSong = () => {\r\n  const { roomId } = useParams();\r\n  const { historyArray, round, setRoomId } = React.useContext(GameRoomContext);\r\n\r\n  React.useEffect(() => {\r\n    setRoomId(roomId);\r\n  }, [roomId, setRoomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Previous Songs:</GenericLabel>\r\n      <SongListWrapper>\r\n        <RoundCounter>Round: {round < 10 ? round + 1 : round}/10</RoundCounter>\r\n        {historyArray\r\n          .map((song, index) => {\r\n            if (index < round) {\r\n              return (\r\n                <SongInfoWrapper key={song.title_short + index}>\r\n                  <SongArt src={song.album.cover_medium} />\r\n                  <InfoSection>\r\n                    <Title>{song.title_short}</Title>\r\n                    <Artist>{song.artist.name}</Artist>\r\n                  </InfoSection>\r\n                </SongInfoWrapper>\r\n              );\r\n            }\r\n            return;\r\n          })\r\n          .reverse()}\r\n      </SongListWrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default PreviousSong;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n  margin-bottom: 50px;\r\n  padding-right: 30px;\r\n`;\r\nconst Appear = keyframes`\r\n0%{\r\n  opacity: 0;\r\n  transform: translateY(-100%)\r\n\r\n}100%{\r\n  opacity: 1;\r\n  transform: translateY(0)\r\n\r\n}`;\r\n\r\nconst SongListWrapper = styled.div`\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  font-size: 30px;\r\n  width: 100%;\r\n  min-height: 100px;\r\n  background: white;\r\n  transition: 500ms;\r\n`;\r\n\r\nconst RoundCounter = styled.div`\r\n  width: 100%;\r\n  border-bottom: 1px solid ${COLORS.midnight};\r\n  font-size: 20px;\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst SongInfoWrapper = styled.div`\r\n  display: flex;\r\n  margin-bottom: 5px;\r\n  animation: ${Appear} 800ms ease-in-out;\r\n  transform-origin: left;\r\n`;\r\n\r\nconst SongArt = styled.img`\r\n  width: 75px;\r\n  height: 75px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst InfoSection = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Title = styled.span``;\r\n\r\nconst Artist = styled.span`\r\n  font-style: italic;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { AiFillCrown } from \"react-icons/ai\";\r\nimport COLORS from \"../../COLORS\";\r\n\r\nconst correctGuessOutput = (usersCorrectGuess) => {\r\n  console.log(usersCorrectGuess);\r\n  if (usersCorrectGuess.artist && usersCorrectGuess.songName)\r\n    return `in ${usersCorrectGuess.time.toFixed(2)} seconds`;\r\n  if (usersCorrectGuess.artist) {\r\n    return \"The artist\";\r\n  }\r\n  if (usersCorrectGuess.songName) {\r\n    return \"The song's name \";\r\n  }\r\n};\r\n\r\nconst Ranking = () => {\r\n  const {\r\n    usersList,\r\n    setCurrentRoomId,\r\n    currentUser,\r\n    currentTrackGuesses,\r\n  } = React.useContext(CurrentUserContext);\r\n\r\n  const { roomId } = useParams();\r\n\r\n  React.useEffect(() => {\r\n    setCurrentRoomId(roomId);\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Ranking: </GenericLabel>\r\n      <UsersListWrapper>\r\n        {usersList.map((user, index) => {\r\n          return (\r\n            <UserWrapper key={user.playerId}>\r\n              <InfoWrapper>\r\n                <Rank>{index + 1}.</Rank>\r\n\r\n                <UserInfoWrapper>\r\n                  <NameWrapper>\r\n                    {user.role === \"host\" ? (\r\n                      <Icon\r\n                        style={{\r\n                          color: `${\r\n                            currentUser.playerId === user.playerId\r\n                              ? COLORS.midnight\r\n                              : \"black\"\r\n                          }`,\r\n                        }}\r\n                      >\r\n                        <AiFillCrown />\r\n                      </Icon>\r\n                    ) : null}\r\n                    <UserName\r\n                      style={{\r\n                        color: `${\r\n                          currentUser.playerId === user.playerId\r\n                            ? COLORS.midnight\r\n                            : \"black\"\r\n                        }`,\r\n                      }}\r\n                    >\r\n                      {user.nickName}\r\n                    </UserName>\r\n                  </NameWrapper>\r\n                  <CorrectGuessWrapper>\r\n                    Guessed:{\" \"}\r\n                    {currentTrackGuesses &&\r\n                      currentTrackGuesses[`${user.playerId}`] && (\r\n                        <span>\r\n                          {correctGuessOutput(\r\n                            currentTrackGuesses[`${user.playerId}`]\r\n                          )}\r\n                        </span>\r\n                      )}\r\n                  </CorrectGuessWrapper>\r\n                </UserInfoWrapper>\r\n              </InfoWrapper>\r\n              <ScoreInfoWrapper>\r\n                <Score>{user.points}pts.</Score>\r\n              </ScoreInfoWrapper>\r\n            </UserWrapper>\r\n          );\r\n        })}\r\n      </UsersListWrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default Ranking;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n  margin-bottom: 50px;\r\n  padding-right: 30px;\r\n`;\r\n\r\nconst UsersListWrapper = styled.div`\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  font-size: 30px;\r\n  width: 100%;\r\n  background: white;\r\n  transition: 500ms;\r\n`;\r\n\r\nconst UserWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin: 5px 0px;\r\n`;\r\n\r\nconst InfoWrapper = styled.div`\r\n  display: flex;\r\n  max-width: 80%;\r\n`;\r\n\r\nconst UserInfoWrapper = styled.div``;\r\n\r\nconst Rank = styled.h1`\r\n  font-size: 40px;\r\n  font-weight: 800;\r\n  margin-right: 5px;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Icon = styled.div`\r\n  width: fit-content;\r\n  margin-top: 5px;\r\n`;\r\n\r\nconst Score = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst UserName = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst ScoreInfoWrapper = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst CorrectGuessWrapper = styled.div`\r\n  font-size: 20px;\r\n`;\r\n\r\nconst NameWrapper = styled.div`\r\n  display: flex;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport ProgressBar from \"./ProgressBar\";\r\nimport Cassette from \"./Cassette\";\r\nimport SearchBar from \"./SearchBar\";\r\nimport PreviousSong from \"./PreviousSongs\";\r\nimport * as firebase from \"firebase\";\r\nimport Ranking from \"./Ranking\";\r\nimport { ip } from \"../../ip\";\r\nimport * as workerTimers from \"worker-timers\";\r\nimport VolumeButton from \"../Button/VolumeButton\";\r\n\r\nconst asyncRequest = async (roomId) => {\r\n  await fetch(`${ip}/updatePhase`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify({ roomId, currentPhase: \"playing\" }),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      console.log(data);\r\n    })\r\n    .catch((err) => console.log(err));\r\n\r\n  fetch(`${ip}/updateRound?roomId=${roomId}`, {\r\n    method: \"GET\",\r\n    headers: { accept: \"application/json\" },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => console.log(data))\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nconst GameRoom = () => {\r\n  const { roomId } = useParams();\r\n  const {\r\n    trackUrl,\r\n    setTrackUrl,\r\n    gamePhase,\r\n    setGamePhase,\r\n    setTrackInfo,\r\n    round,\r\n  } = React.useContext(GameRoomContext);\r\n  const { currentUser } = React.useContext(CurrentUserContext);\r\n  const [time, setTime] = React.useState(5);\r\n  const [volume, setVolume] = React.useState(0.5);\r\n\r\n  const audioRef = React.useRef(null);\r\n  const wrongRef = React.useRef(null);\r\n  const correctRef = React.useRef(null);\r\n  const successRef = React.useRef(null);\r\n\r\n  React.useEffect(() => {\r\n    audioRef.current.volume = volume;\r\n    if (wrongRef.current) {\r\n      wrongRef.current.volume = volume * 2 <= 1 ? volume * 2 : 1;\r\n    }\r\n    if (correctRef.current) {\r\n      correctRef.current.volume = volume * 2 <= 1 ? volume * 2 : 1;\r\n    }\r\n    if (successRef.current) {\r\n      successRef.current.volume = volume * 1.2 <= 1 ? volume * 1.2 : 1;\r\n    }\r\n  }, [audioRef, wrongRef, correctRef, successRef, volume]);\r\n\r\n  //This sets the interval for the timer\r\n  React.useEffect(() => {\r\n    let interval = workerTimers.setInterval(() => {\r\n      if (time > 0) {\r\n        setTime(time - 1);\r\n      }\r\n    }, 1000);\r\n\r\n    //Host updates the phase when the host timer reaches 0\r\n    if (time === 0 && gamePhase === \"loading\" && currentUser.role === \"host\") {\r\n      fetch(`${ip}/updatePhase`, {\r\n        method: \"PUT\",\r\n        body: JSON.stringify({ currentPhase: \"loading\", roomId: roomId }),\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n        });\r\n    }\r\n    if (time === 0 && gamePhase === \"playing\" && currentUser.role === \"host\") {\r\n      asyncRequest(roomId);\r\n    }\r\n    return () => {\r\n      workerTimers.clearInterval(interval);\r\n    };\r\n  }, [time, gamePhase]);\r\n\r\n  //This checks for gamePhase change and sets the timer to the appropriate phase\r\n  React.useEffect(() => {\r\n    const gamePhaseRef = firebase.database().ref(`Rooms/${roomId}/phase`);\r\n    gamePhaseRef.on(\"value\", (snapshot) => {\r\n      let phase = snapshot.val();\r\n      if (phase === \"playing\") {\r\n        if (round > 9) {\r\n          setGamePhase(phase);\r\n          return;\r\n        }\r\n        setTime(30);\r\n        audioRef.current.play();\r\n        console.log(\"playtrack\");\r\n      }\r\n      if (phase === \"loading\") {\r\n        setTime(5);\r\n        audioRef.current.pause();\r\n        console.log(\"stopTrack\");\r\n      }\r\n      setGamePhase(phase);\r\n    });\r\n    return () => {\r\n      const gamePhaseRef = firebase.database().ref(`Rooms/${roomId}/phase`);\r\n      gamePhaseRef.off();\r\n    };\r\n  }, [roomId, round]);\r\n\r\n  //This updates the current song during the loading stage\r\n  React.useEffect(() => {\r\n    if (gamePhase === \"loading\" && currentUser.role === \"host\") {\r\n      console.log(\"in fetch track\");\r\n      fetch(`${ip}/updateCurrentTrack`, {\r\n        method: \"PUT\",\r\n        body: JSON.stringify({ roomId: roomId }),\r\n        headers: {\r\n          Accept: \"applicatition/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n          // setTrackUrl(data.selectedSongUrl);\r\n        });\r\n    }\r\n  }, [gamePhase]);\r\n\r\n  React.useEffect(() => {\r\n    const currentTrackInfo = firebase\r\n      .database()\r\n      .ref(`/Rooms/${roomId}/currentTrack/trackInfo`);\r\n    currentTrackInfo.on(\"value\", (snapshot) => {\r\n      let currentTrackInfo = snapshot.val();\r\n      if (currentTrackInfo) {\r\n        setTrackInfo(currentTrackInfo);\r\n        setTrackUrl(currentTrackInfo.preview);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      currentTrackInfo.off();\r\n    };\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <VolumeButton volume={volume} setVolume={setVolume} />\r\n      <Player src={trackUrl} ref={audioRef}>\r\n        I'm sorry, your browser doesn't support audio\r\n      </Player>\r\n      <SearchBar\r\n        wrongRef={wrongRef}\r\n        correctRef={correctRef}\r\n        successRef={successRef}\r\n      />\r\n      <ProgressBar time={time} />\r\n      <Cassette time={time}></Cassette>\r\n      <BottomSection>\r\n        <PreviousSong />\r\n        <Ranking />\r\n      </BottomSection>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  margin-top: 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0 40px;\r\n`;\r\n\r\nconst Player = styled.audio``;\r\n\r\nconst BottomSection = styled.div`\r\n  margin-top: 20px;\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: 50% 50%;\r\n`;\r\n\r\nexport default GameRoom;\r\n","import React from \"react\";\r\nimport COLORS from \"../../COLORS\";\r\nimport styled from \"styled-components\";\r\nimport Button from \"../Button/Button\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport { AiFillCrown } from \"react-icons/ai\";\r\nimport { ip } from \"../../ip\";\r\n\r\nconst GameOverScreen = () => {\r\n  const { usersList, setCurrentRoomId, currentUser } = React.useContext(\r\n    CurrentUserContext\r\n  );\r\n  const { setRound, setHistoryArray, setGameStarted } = React.useContext(\r\n    GameRoomContext\r\n  );\r\n  const { roomId } = useParams();\r\n  const { location, deletePlaylist } = React.useContext(LobbyContext);\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    if (location !== \"gameRoom\") {\r\n      history.push(`/lobby/${roomId}`);\r\n    }\r\n    return () => {\r\n      setRound(0);\r\n      deletePlaylist();\r\n      setHistoryArray([]);\r\n      setGameStarted(false);\r\n    };\r\n  }, [location, roomId]);\r\n\r\n  React.useEffect(() => {\r\n    setCurrentRoomId(roomId);\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Title>Here is the final ranking !</Title>\r\n      <UsersListWrapper>\r\n        {usersList.map((user, index) => {\r\n          return (\r\n            <UserWrapper key={user.playerId}>\r\n              <InfoWrapper>\r\n                <Rank>{index + 1}.</Rank>\r\n\r\n                <UserInfoWrapper>\r\n                  <NameWrapper>\r\n                    {user.role === \"host\" ? (\r\n                      <Icon\r\n                        style={{\r\n                          color: `${\r\n                            currentUser.playerId === user.playerId\r\n                              ? COLORS.midnight\r\n                              : \"black\"\r\n                          }`,\r\n                        }}\r\n                      >\r\n                        <AiFillCrown />\r\n                      </Icon>\r\n                    ) : null}\r\n                    <UserName\r\n                      style={{\r\n                        color: `${\r\n                          currentUser.playerId === user.playerId\r\n                            ? COLORS.midnight\r\n                            : \"black\"\r\n                        }`,\r\n                      }}\r\n                    >\r\n                      {user.nickName}\r\n                    </UserName>\r\n                  </NameWrapper>\r\n                </UserInfoWrapper>\r\n              </InfoWrapper>\r\n              <ScoreInfoWrapper>\r\n                <Score>{user.points}pts.</Score>\r\n              </ScoreInfoWrapper>\r\n            </UserWrapper>\r\n          );\r\n        })}\r\n      </UsersListWrapper>\r\n      {currentUser.role === \"host\" ? (\r\n        <ButtonsWrapper>\r\n          <Button\r\n            handler={() => {\r\n              fetch(`${ip}/${roomId}/lobbyReset`, {\r\n                method: \"GET\",\r\n                headers: {\r\n                  Accept: \"application/json\",\r\n                  \"Content-Type\": \"application/json\",\r\n                },\r\n              })\r\n                .then((res) => res.json())\r\n                .then((data) => console.log(data))\r\n                .catch((err) => console.log(err));\r\n            }}\r\n          >\r\n            Return to Lobby\r\n          </Button>\r\n          <Button\r\n            handler={() => {\r\n              fetch(`${ip}/${roomId}/GameReset`, {\r\n                method: \"GET\",\r\n                headers: {\r\n                  Accept: \"application/json\",\r\n                  \"Content-Type\": \"application/json\",\r\n                },\r\n              })\r\n                .then((res) => res.json())\r\n                .then((data) => console.log(data))\r\n                .catch((err) => console.log(err));\r\n            }}\r\n          >\r\n            Restart Game\r\n          </Button>\r\n        </ButtonsWrapper>\r\n      ) : (\r\n        <Title>\r\n          Plase wait for the host to choose to return to the lobby or to restart\r\n          game.\r\n        </Title>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default GameOverScreen;\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  font-family: \"Echizen\";\r\n  font-size: 60px;\r\n  text-shadow: 2px 2px 2px ${COLORS.midnight};\r\n  color: white;\r\n  margin: 20px 0px;\r\n`;\r\n\r\nconst UsersListWrapper = styled.div`\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  font-size: 30px;\r\n  width: 50%;\r\n  background: white;\r\n  transition: 500ms;\r\n  text-shadow: none;\r\n  color: black;\r\n  font-family: \"\";\r\n`;\r\n\r\nconst UserWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin: 5px 0px;\r\n`;\r\n\r\nconst InfoWrapper = styled.div`\r\n  display: flex;\r\n  max-width: 80%;\r\n`;\r\n\r\nconst UserInfoWrapper = styled.div``;\r\n\r\nconst Rank = styled.h1`\r\n  font-size: 40px;\r\n  font-weight: 800;\r\n  margin-right: 5px;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Icon = styled.div`\r\n  width: fit-content;\r\n  margin-top: 5px;\r\n`;\r\n\r\nconst Score = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst UserName = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst ScoreInfoWrapper = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst NameWrapper = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst ButtonsWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  width: 100%;\r\n  margin: 20px 0px;\r\n`;\r\n","import React from \"react\";\r\nimport GameRoom from \"./GameRoom\";\r\nimport GameOver from \"./GameOver\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport ErrorScreen from \"../ErrorScreen/ErrorScreen\";\r\nimport * as firebase from \"firebase\";\r\n\r\nconst GameRoomWrapper = () => {\r\n  const {\r\n    round,\r\n    gamePhase,\r\n    gameRoomExists,\r\n    setGameRoomExists,\r\n    setGameStarted,\r\n  } = React.useContext(GameRoomContext);\r\n  const { currentUser, isHostPresent } = React.useContext(CurrentUserContext);\r\n\r\n  const history = useHistory();\r\n  const { roomId } = useParams();\r\n  console.log(gameRoomExists);\r\n\r\n  React.useEffect(() => {\r\n    const roomRef = firebase.database().ref(`Rooms/${roomId}`);\r\n\r\n    roomRef.on(\"value\", (snapshot) => {\r\n      setGameRoomExists(snapshot.exists());\r\n    });\r\n  }, [roomId]);\r\n\r\n  React.useEffect(() => {\r\n    console.log(history.action);\r\n\r\n    return () => {\r\n      if (history.action === \"POP\") {\r\n        history.push(\"/\");\r\n        window.location.replace(\"/\");\r\n      }\r\n    };\r\n  }, [history]);\r\n\r\n  React.useEffect(() => {\r\n    setGameStarted(true);\r\n  }, []);\r\n\r\n  if (gameRoomExists === false) {\r\n    return (\r\n      <ErrorScreen\r\n        title=\"404 - Room not found\"\r\n        message={\r\n          \"We're sorry, we couldn't find the room you are trying to join\"\r\n        }\r\n      />\r\n    );\r\n  }\r\n  if (isHostPresent === false) {\r\n    return (\r\n      <ErrorScreen\r\n        title=\"The host has left\"\r\n        message=\"We're sorry, the host has left and the game has ended. Return to the homepage to start a new game.\"\r\n      />\r\n    );\r\n  }\r\n\r\n  if (!currentUser && gameRoomExists) {\r\n    return <>{history.push(`/lobby/${roomId}`)}</>;\r\n  }\r\n\r\n  if (round > 9 && gamePhase === \"playing\" && gameRoomExists === true) {\r\n    return <GameOver />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {gameRoomExists === true && isHostPresent === true && currentUser ? (\r\n        <GameRoom />\r\n      ) : (\r\n        <Spinner size={50} color={\"lightgrey\"} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GameRoomWrapper;\r\n","import { createGlobalStyle } from \"styled-components\";\r\nimport COLORS from \"./COLORS\";\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n*{\r\n  box-sizing:border-box;\r\n  font-family: \"Roboto Condensed\", sans-serif;\r\n  /* font-family:'Echizen'; */\r\n  /* color: black; */\r\n}\r\n\r\nbody{\r\n  background: ${COLORS.main}\r\n}\r\n\r\nhtml, body, div, span, applet, object, iframe,\r\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\r\na, abbr, acronym, address, big, cite, code,\r\ndel, dfn, em, img, ins, kbd, q, s, samp,\r\nsmall, strike, strong, sub, sup, tt, var,\r\nb, u, i, center,\r\ndl, dt, dd, ol, ul, li,\r\nfieldset, form, label, legend,\r\ntable, caption, tbody, tfoot, thead, tr, th, td,\r\narticle, aside, canvas, details, embed, \r\nfigure, figcaption, footer, header, hgroup, \r\nmenu, nav, output, ruby, section, summary,\r\ntime, mark, audio, video {\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\tborder: 0;\r\n\tfont-size: 100%;\r\n\t/* font: inherit; */\r\n\tvertical-align: baseline;\r\n}\r\n/* HTML5 display-role reset for older browsers */\r\narticle, aside, details, figcaption, figure, \r\nfooter, header, hgroup, menu, nav, section {\r\n\tdisplay: block;\r\n}\r\nbody {\r\n\tline-height: 1;\r\n}\r\nol, ul {\r\n\tlist-style: none;\r\n}\r\nblockquote, q {\r\n\tquotes: none;\r\n}\r\nblockquote:before, blockquote:after,\r\nq:before, q:after {\r\n\tcontent: '';\r\n\tcontent: none;\r\n}\r\ntable {\r\n\tborder-collapse: collapse;\r\n\tborder-spacing: 0;\r\n}\r\n`;\r\n\r\nexport default GlobalStyle;\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport Background from \"./Background/Background\";\r\nimport Header from \"./Header/Header\";\r\nimport SignIn from \"./SignIn/SignIn\";\r\nimport HostHandler from \"./SignIn/HostHandler\";\r\nimport LobbyWrapper from \"./Lobby/LobbyWrapper\";\r\nimport GameRoomWrapper from \"./GameRoom/GameRoomWrapper\";\r\nimport GlobalStyles from \"../GlobalStyles\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <Router>\r\n      <Background>\r\n        <Header />\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n            <SignIn\r\n              buttonHandler={HostHandler}\r\n              buttonMessage=\"Create Private Room\"\r\n            />\r\n          </Route>\r\n          <Route path=\"/lobby/:roomId\">\r\n            <LobbyWrapper />\r\n          </Route>\r\n          <Route path=\"/gameroom/:roomId\">\r\n            <GameRoomWrapper />\r\n          </Route>\r\n        </Switch>\r\n        <GlobalStyles />\r\n      </Background>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport FireBaseContextProvider from \"./FirebaseContext\";\r\nimport CurrentUserContextProvider from \"./CurrentUserContext\";\r\nimport LobbyContextProvider from \"./LobbyContext\";\r\nimport GameRoomContextProvider from \"./GameRoomContext\";\r\nimport App from \"./components/App\";\r\n\r\nReactDOM.render(\r\n  <FireBaseContextProvider>\r\n    <CurrentUserContextProvider>\r\n      <LobbyContextProvider>\r\n        <GameRoomContextProvider>\r\n          <App />\r\n        </GameRoomContextProvider>\r\n      </LobbyContextProvider>\r\n    </CurrentUserContextProvider>\r\n  </FireBaseContextProvider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}