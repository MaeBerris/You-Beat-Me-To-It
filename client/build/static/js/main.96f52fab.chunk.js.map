{"version":3,"sources":["assets/cassette.png","FirebaseContext.js","CurrentUserContext.js","LobbyContext.js","GameRoomContext.js","COLORS.js","components/Background/Background.js","components/Header/Header.js","components/Labels/GenericLabel.js","components/Button/Button.js","components/Spinner/Spinner.js","components/SignIn/SignIn.js","components/SignIn/HostHandler.js","components/SignIn/PlayerHandler.js","components/Lobby/Results.js","ip.js","components/Lobby/Search.js","components/Lobby/SelectedPlaylist.js","components/Lobby/Users.js","components/Lobby/SelectedPlaylistPlayer.js","components/Lobby/HostLobby.js","components/ErrorScreen/ErrorScreen.js","components/ErrorScreen/GameInProgress.js","components/Lobby/LobbyWrapper.js","components/GameRoom/ProgressBar.js","components/GameRoom/Cassette.js","components/GameRoom/LevenTest.js","components/GameRoom/SearchBar.js","components/GameRoom/PreviousSongs.js","components/GameRoom/Ranking.js","components/GameRoom/GameRoom.js","components/GameRoom/GameOver.js","components/GameRoom/GameRoomWrapper.js","GlobalStyles.js","components/App.js","index.js"],"names":["module","exports","FireBaseContext","createContext","firebaseApp","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","FireBaseContextProvider","children","Provider","CurrentUserContext","React","CurrentUserContextProvider","useState","currentRoomId","setCurrentRoomId","currentUser","setCurrentUser","usersList","setUsersList","artist","songName","time","correctGuess","setCorrectGuess","currentTrackGuesses","setCurrentTrackGuesses","undefined","isHostPresent","setIsHostPresent","console","log","useEffect","RoomRef","ref","length","onDisconnect","remove","cancel","playerId","on","snapshot","players","val","SortedArray","Object","values","sort","a","b","points","host","find","user","role","value","LobbyContext","initialState","searchResults","selectedPlaylist","loadState","Reducer","state","action","type","playlist","id","Error","LobbyContextProvider","useReducer","playlistState","dispatch","roomIdState","setRoomId","location","setLocation","roomExists","setRoomExists","roomLocationRef","locationFromDatabase","off","startSearch","receivePlaylists","data","selectPlaylist","deletePlaylist","GameRoomContext","GameRoomContextProvider","trackUrl","setTrackUrl","gamePhase","setGamePhase","trackInfo","setTrackInfo","historyArray","setHistoryArray","result","setResult","round","setRound","GameRoomId","gameRoomExists","setGameRoomExists","gameStarted","setGameStarted","COLORS","main","secondary","tertiary","midnight","Wrapper","styled","div","Shape1","Shape2","Shape3","ChildWrapper","Footer","Link","Background","href","target","size","Beat","Shape","Header","Content","GenericLabel","Button","handler","disabled","StyledButton","onClick","button","Spinner","color","SpinWheel","props","Spin","keyframes","FiLoader","Input","input","SignInHost","buttonHandler","buttonMessage","nickName","setNickName","loading","setLoading","useContext","history","useHistory","roomId","useParams","onKeyDown","ev","key","onChange","hostHandler","fetch","method","body","JSON","stringify","headers","Accept","then","res","json","userInfo","push","roomInfo","catch","err","PlayerHandler","Results","setIsOpen","animation","setAnimation","style","height","display","alignItems","onAnimationEnd","map","item","ResultWrapper","Image","src","picture_medium","ResultsInfo","Title","title","Tracks","nb_tracks","Open","Close","img","p","ip","Search","searchTerm","setSearchTerm","isOpen","SearchPlaylist","TopBar","placeholder","string","split","join","searchToUrl","SpinnerPosition","SelectedPlaylist","Icon","Users","isCopied","setIsCopied","List","index","User","navigator","clipboard","writeText","window","ColorsAnimation","Props","SelectedPlaylistPlayer","validatePlaylist","Promise","resolve","reject","promise","BottomSection","ButtonWrapper","BigButton","ErrorAnimation","ErrorMessage","Text","HostLobby","error","setError","keys","ErrorScreen","message","spinner","Message","GameInProgress","RoundCounter","RoundSpan","span","LobbyWrapper","roomRef","exists","confirm","SignIn","ProgressBar","barRef","useRef","calculateGuessPosition","position","current","clientWidth","toFixed","Bar","guess","Guess","Tip","Transform","Cassette","setArtist","setSongName","name","title_short","cassette","Counter","Label","SongName","PlaceHolder","SongNameSpan","Separator","ArtistSpan","Appear","calculateDistance","artistOrSongName","valueToSearch","artistOrSong","toLowerCase","wordsArray","allSubStrings","forEach","word","i","trim","newArray","slice","ArtistResultMap","searchingFor","distance","leven","marginOfError","Math","floor","fetchHelper","SearchBar","placeHolderText","setPlaceHolderText","artistResult","songNameResult","timeStamp","Date","getTime","previousGuess","Fail","PreviousSong","SongListWrapper","song","SongInfoWrapper","SongArt","album","cover_medium","InfoSection","Artist","reverse","Ranking","UsersListWrapper","UserWrapper","InfoWrapper","Rank","UserInfoWrapper","NameWrapper","UserName","CorrectGuessWrapper","usersCorrectGuess","ScoreInfoWrapper","Score","h1","Player","audio","Slider","SlidderWrapper","GameRoom","setTime","volume","setVolume","audioRef","interval","setInterval","currentPhase","accept","clearInterval","phase","play","pause","currentTrackInfo","preview","min","max","GameOverScreen","ButtonsWrapper","GameRoomWrapper","GameOver","GlobalStyle","createGlobalStyle","App","exact","path","HostHandler","GlobalStyles","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.96f52fab.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cassette.9ea9d06a.png\";","import React, { createContext } from \"react\";\r\nimport * as firebase from \"firebase\";\r\n\r\nexport const FireBaseContext = createContext(null);\r\n\r\nvar firebaseConfig = {\r\n  apiKey: \"AIzaSyCvDktR2m3-rIU3ddPsLkqT2Yfp4EASteA\",\r\n  authDomain: \"you-beat-me-to-it.firebaseapp.com\",\r\n  databaseURL: \"https://you-beat-me-to-it.firebaseio.com\",\r\n  projectId: \"you-beat-me-to-it\",\r\n  storageBucket: \"you-beat-me-to-it.appspot.com\",\r\n  messagingSenderId: \"1075878771170\",\r\n  appId: \"1:1075878771170:web:253cca6ef4a7e1e7a8e1bb\",\r\n};\r\n\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\n\r\nconst FireBaseContextProvider = ({ children }) => {\r\n  return (\r\n    <FireBaseContext.Provider firebaseApp={firebaseApp}>\r\n      {children}\r\n    </FireBaseContext.Provider>\r\n  );\r\n};\r\n\r\nexport default FireBaseContextProvider;\r\n","import React from \"react\";\r\nimport * as firebase from \"firebase\";\r\n\r\nexport const CurrentUserContext = React.createContext(null);\r\n\r\nconst CurrentUserContextProvider = ({ children }) => {\r\n  const [currentRoomId, setCurrentRoomId] = React.useState(null);\r\n  const [currentUser, setCurrentUser] = React.useState(null);\r\n  const [usersList, setUsersList] = React.useState(null);\r\n  const [correctGuess, setCorrectGuess] = React.useState({\r\n    artist: false,\r\n    songName: false,\r\n    time: null,\r\n  });\r\n  const [currentTrackGuesses, setCurrentTrackGuesses] = React.useState({});\r\n  const [isHostPresent, setIsHostPresent] = React.useState(undefined);\r\n  console.log(\"isHostPresentContext\", isHostPresent);\r\n\r\n  React.useEffect(() => {\r\n    if (currentUser && usersList) {\r\n      const RoomRef = firebase.database().ref(`Rooms/${currentRoomId}`);\r\n      if (usersList.length === 1) {\r\n        RoomRef.onDisconnect().remove();\r\n      } else {\r\n        RoomRef.onDisconnect().cancel();\r\n      }\r\n      const playerRef = firebase\r\n        .database()\r\n        .ref(`Rooms/${currentRoomId}/players/${currentUser.playerId}`);\r\n\r\n      playerRef.onDisconnect().remove();\r\n    }\r\n  }, [currentUser, currentRoomId, usersList]);\r\n\r\n  React.useEffect(() => {\r\n    if (currentRoomId) {\r\n      const PlayersRef = firebase\r\n        .database()\r\n        .ref(`Rooms/${currentRoomId}/players`);\r\n      PlayersRef.on(\"value\", (snapshot) => {\r\n        const players = snapshot.val();\r\n        console.log(\"players\", players);\r\n        if (players === null) {\r\n          setIsHostPresent(false);\r\n        }\r\n        if (players) {\r\n          const SortedArray = Object.values(players).sort((a, b) => {\r\n            return b.points - a.points;\r\n          });\r\n          let host = SortedArray.find((user) => {\r\n            if (user.role === \"host\") {\r\n              return true;\r\n            }\r\n          });\r\n          console.log(\"host\", host);\r\n          if (host) {\r\n            setIsHostPresent(true);\r\n          } else {\r\n            setIsHostPresent(false);\r\n          }\r\n          setUsersList(SortedArray);\r\n        }\r\n      });\r\n    }\r\n  }, [setUsersList, currentRoomId]);\r\n\r\n  React.useEffect(() => {\r\n    const currentGuessesRef = firebase\r\n      .database()\r\n      .ref(`Rooms/${currentRoomId}/currentTrack/correctGuesses`);\r\n\r\n    currentGuessesRef.on(\"value\", (snapshot) => {\r\n      setCurrentTrackGuesses(snapshot.val());\r\n    });\r\n  }, [currentRoomId]);\r\n\r\n  return (\r\n    <CurrentUserContext.Provider\r\n      value={{\r\n        currentUser,\r\n        setCurrentUser,\r\n        usersList,\r\n        setUsersList,\r\n        correctGuess,\r\n        setCorrectGuess,\r\n        setCurrentRoomId,\r\n        currentTrackGuesses,\r\n        isHostPresent,\r\n      }}\r\n    >\r\n      {children}\r\n    </CurrentUserContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CurrentUserContextProvider;\r\n","import React from \"react\";\r\nimport * as firebase from \"firebase\";\r\n\r\nexport const LobbyContext = React.createContext(null);\r\n\r\nconst initialState = {\r\n  searchResults: null,\r\n  selectedPlaylist: {},\r\n  loadState: \"idle\",\r\n};\r\n\r\nfunction Reducer(state, action) {\r\n  switch (action.type) {\r\n    case \"start-search\": {\r\n      return { ...state, loadState: \"loading\" };\r\n    }\r\n    case \"receive-playlists\": {\r\n      return { ...state, searchResults: action.playlist, loadState: \"idle\" };\r\n    }\r\n    case \"select-playlist\": {\r\n      const selectedPlaylist = { [action.playlist.id]: action.playlist };\r\n      return { ...state, selectedPlaylist: selectedPlaylist };\r\n    }\r\n    case \"delete-playlist\": {\r\n      return { ...state, selectedPlaylist: {} };\r\n    }\r\n    default:\r\n      throw new Error(\"Unrecognized Action\");\r\n  }\r\n}\r\n\r\nconst LobbyContextProvider = ({ children }) => {\r\n  const [playlistState, dispatch] = React.useReducer(Reducer, initialState);\r\n  const [roomIdState, setRoomId] = React.useState(null);\r\n  const [location, setLocation] = React.useState(\"lobby\");\r\n  const [roomExists, setRoomExists] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    const roomLocationRef = firebase\r\n      .database()\r\n      .ref(`Rooms/${roomIdState}/roomLocation`);\r\n\r\n    roomLocationRef.on(\"value\", (snapshot) => {\r\n      let locationFromDatabase = snapshot.val();\r\n\r\n      setLocation(locationFromDatabase);\r\n    });\r\n    return () => {\r\n      roomLocationRef.off();\r\n    };\r\n  }, [roomIdState, location]);\r\n\r\n  const startSearch = () => {\r\n    dispatch({ type: \"start-search\" });\r\n  };\r\n\r\n  const receivePlaylists = (data) => {\r\n    dispatch({ type: \"receive-playlists\", playlist: data });\r\n  };\r\n\r\n  const selectPlaylist = (data) => {\r\n    dispatch({ type: \"select-playlist\", playlist: data });\r\n  };\r\n\r\n  const deletePlaylist = (data) => {\r\n    dispatch({ type: \"delete-playlist\" });\r\n  };\r\n  return (\r\n    <LobbyContext.Provider\r\n      value={{\r\n        playlistState,\r\n        startSearch,\r\n        receivePlaylists,\r\n        selectPlaylist,\r\n        deletePlaylist,\r\n        roomIdState,\r\n        setRoomId,\r\n        location,\r\n        roomExists,\r\n        setRoomExists,\r\n      }}\r\n    >\r\n      {children}\r\n    </LobbyContext.Provider>\r\n  );\r\n};\r\n\r\nexport default LobbyContextProvider;\r\n","import React from \"react\";\r\nimport * as firebase from \"firebase\";\r\n\r\nexport const GameRoomContext = React.createContext(null);\r\n\r\nconst GameRoomContextProvider = ({ children }) => {\r\n  const [trackUrl, setTrackUrl] = React.useState(null);\r\n  const [gamePhase, setGamePhase] = React.useState(null);\r\n  const [trackInfo, setTrackInfo] = React.useState(null);\r\n  const [historyArray, setHistoryArray] = React.useState([]);\r\n  const [result, setResult] = React.useState(null);\r\n  const [round, setRound] = React.useState(0);\r\n  const [GameRoomId, setRoomId] = React.useState(null);\r\n  const [gameRoomExists, setGameRoomExists] = React.useState(undefined);\r\n  const [gameStarted, setGameStarted] = React.useState(false);\r\n\r\n  console.log(\"inContextPhase\", gamePhase);\r\n\r\n  React.useEffect(() => {\r\n    const roundRef = firebase.database().ref(`Rooms/${GameRoomId}/round`);\r\n    roundRef.on(\"value\", (snapshot) => {\r\n      setRound(snapshot.val());\r\n    });\r\n\r\n    return () => {\r\n      const roundRef = firebase.database().ref(`Rooms/${GameRoomId}/round`);\r\n      roundRef.off();\r\n    };\r\n  }, [GameRoomId]);\r\n\r\n  React.useEffect(() => {\r\n    if (trackInfo) {\r\n      setHistoryArray([...historyArray, trackInfo]);\r\n    }\r\n  }, [trackInfo]);\r\n\r\n  return (\r\n    <GameRoomContext.Provider\r\n      value={{\r\n        trackUrl,\r\n        setTrackUrl,\r\n        gamePhase,\r\n        setGamePhase,\r\n        trackInfo,\r\n        setTrackInfo,\r\n        result,\r\n        setResult,\r\n        historyArray,\r\n        setHistoryArray,\r\n        round,\r\n        setRound,\r\n        setRoomId,\r\n        gameRoomExists,\r\n        setGameRoomExists,\r\n        gameStarted,\r\n        setGameStarted,\r\n      }}\r\n    >\r\n      {children}\r\n    </GameRoomContext.Provider>\r\n  );\r\n};\r\n\r\nexport default GameRoomContextProvider;\r\n","const COLORS = {\r\n  main: \"rgb(67, 153, 222)\",\r\n  secondary: \"rgb(223, 25, 93)\",\r\n  tertiary: \"#ffc94a\",\r\n  // midnight: \"#893dd4\",\r\n  midnight: \"#6c2fa8\",\r\n};\r\n\r\nexport default COLORS;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport COLORS from \"../../COLORS\";\r\nimport { AiFillGithub } from \"react-icons/ai\";\r\n\r\nconst Background = ({ children }) => {\r\n  return (\r\n    <Wrapper>\r\n      <Shape1></Shape1>\r\n      <Shape2></Shape2>\r\n      <Shape3></Shape3>\r\n      <ChildWrapper>{children}</ChildWrapper>\r\n      <Footer>\r\n        © Mae Berris 2020{\" \"}\r\n        <Link\r\n          href=\"https://github.com/MaeBerris/You-Beat-Me-To-It\"\r\n          target=\"_blank\"\r\n        >\r\n          <AiFillGithub size={20} />\r\n        </Link>\r\n      </Footer>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  background-color: ${COLORS.main};\r\n  position: relative;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Shape1 = styled.div`\r\n  width: 500px;\r\n  height: 800px;\r\n  border-radius: 50%;\r\n  transform: rotate(20deg);\r\n  position: absolute;\r\n  top: -400px;\r\n  left: -100px;\r\n  background-color: ${COLORS.secondary};\r\n`;\r\n\r\nconst Shape2 = styled.div`\r\n  width: 500px;\r\n  height: 500px;\r\n  transform: rotate(55deg);\r\n  position: absolute;\r\n  bottom: -450px;\r\n  right: 300px;\r\n  background-color: ${COLORS.tertiary};\r\n`;\r\n\r\nconst Shape3 = styled.div`\r\n  border-bottom: 400px solid ${COLORS.midnight};\r\n  border-left: 55px solid transparent;\r\n  border-right: 55px solid transparent;\r\n  height: 0px;\r\n  width: 350px;\r\n  position: absolute;\r\n  right: -150px;\r\n  top: 20%;\r\n  transform: rotate(70deg);\r\n`;\r\n\r\nconst ChildWrapper = styled.div`\r\n  position: relative;\r\n  z-index: 3;\r\n  min-height: 100vh;\r\n`;\r\n\r\nconst Footer = styled.div`\r\n  position: absolute;\r\n  color: white;\r\n  right: 15px;\r\n  bottom: 15px;\r\n  font-size: 20px;\r\n  z-index: 3;\r\n`;\r\n\r\nconst Link = styled.a`\r\n  color: white;\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n  margin-left: 5px;\r\n`;\r\nexport default Background;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport COLORS from \"../../COLORS\";\r\n\r\nconst Header = () => {\r\n  return (\r\n    <Wrapper>\r\n      You <Beat>Beat</Beat> Me To It !\r\n      <Shape />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  position: relative;\r\n  text-align: center;\r\n  width: fit-content;\r\n  color: white;\r\n  font-size: 100px;\r\n  font-family: \"Echizen\";\r\n  margin: 0 auto;\r\n  margin-top: 25px;\r\n  margin-bottom: 50px;\r\n  text-shadow: 2px 2px 0px ${COLORS.midnight};\r\n  line-height: 70%;\r\n`;\r\n\r\nconst Beat = styled.div`\r\n  /* background: linear-gradient(\r\n    to right,\r\n    ${COLORS.tertiary},\r\n    ${COLORS.secondary}\r\n  ); */\r\n  display: block;\r\n  width: fit-content;\r\n  margin: 0 auto;\r\n  /* transform: skew(9deg); */\r\n  padding: 0px 5px;\r\n  color: ${COLORS.midnight};\r\n  text-shadow: 2px 2px 0px white;\r\n  /* border-bottom: 5px solid ${COLORS.midnight}; */\r\n  font-family: \"Echizen\";\r\n`;\r\n\r\nconst Shape = styled.div`\r\n  width: 0;\r\n  height: 0;\r\n  border-left: 150px solid transparent;\r\n  border-right: 150px solid transparent;\r\n  border-bottom: 250px solid #ff33be;\r\n  /* border-bottom: 250px solid ${COLORS.tertiary}; */\r\n  position: absolute;\r\n  z-index: -3;\r\n  top: -20px;\r\n  left: -20px;\r\n`;\r\n\r\n// const Beat = styled.span`\r\n//   background: -webkit-linear-gradient(${COLORS.tertiary}, ${COLORS.secondary});\r\n//   -webkit-background-clip: text;\r\n//   -webkit-text-fill-color: transparent;\r\n//   font-family: \"Echizen\";\r\n// `;\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst GenericLabel = ({ children }) => {\r\n  return (\r\n    <Wrapper>\r\n      <Content>{children}</Content>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  transform: skew(9deg);\r\n  background: white;\r\n  font-size: 40px;\r\n  padding: 5px;\r\n  display: flex;\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  transform: skew(-9deg);\r\n  font-weight: 700;\r\n  color: black;\r\n`;\r\n\r\nexport default GenericLabel;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport COLORS from \"../../COLORS\";\r\n\r\nconst Button = ({ children, handler, disabled }) => {\r\n  return (\r\n    <StyledButton onClick={handler} disabled={disabled}>\r\n      {children}\r\n    </StyledButton>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n\r\nconst StyledButton = styled.button`\r\n  height: 50px;\r\n  border-radius: 30px;\r\n  font-weight: 700;\r\n  padding: 5px 20px;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  color: white;\r\n  border: none;\r\n  background: linear-gradient(\r\n    to right,\r\n    ${COLORS.tertiary},\r\n    ${COLORS.secondary}\r\n  );\r\n  backdrop-filter: none;\r\n  transition: filter 0.3s;\r\n\r\n  :hover {\r\n    filter: saturate(150%);\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { FiLoader } from \"react-icons/fi\";\r\n\r\nconst Spinner = ({ size, color }) => {\r\n  return (\r\n    <Wrapper color={color}>\r\n      <SpinWheel size={size} />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n  color: ${(props) => props.color};\r\n`;\r\n\r\nconst Spin = keyframes`\r\nfrom{\r\n  transform: rotate(0deg)\r\n}to{\r\n  transform: rotate(360deg)\r\n}`;\r\n\r\nconst SpinWheel = styled(FiLoader)`\r\n  animation: ${Spin} 2000ms linear infinite;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport Button from \"../Button/Button\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\nconst SignInHost = ({ buttonHandler, buttonMessage }) => {\r\n  console.log(\"inSignIn\");\r\n  const [nickName, setNickName] = React.useState(\"\");\r\n  const [loading, setLoading] = React.useState(false);\r\n  const { setCurrentUser } = React.useContext(CurrentUserContext);\r\n  const history = useHistory();\r\n  const { roomId } = useParams();\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Nickname:</GenericLabel>\r\n      <Input\r\n        value={nickName}\r\n        onKeyDown={(ev) => {\r\n          if (ev.key === \"Enter\" && nickName.length >= 1 && !loading) {\r\n            setLoading(true);\r\n            buttonHandler({\r\n              nickName,\r\n              setNickName,\r\n              setCurrentUser,\r\n              history,\r\n              roomId,\r\n            });\r\n          }\r\n        }}\r\n        onChange={(ev) => {\r\n          if (ev.target.value.length > 30) {\r\n          } else {\r\n            setNickName(ev.target.value);\r\n          }\r\n        }}\r\n      />\r\n      <Button\r\n        disabled={nickName.length < 1 || loading}\r\n        handler={() => {\r\n          setLoading(true);\r\n          buttonHandler({\r\n            nickName,\r\n            setNickName,\r\n            setCurrentUser,\r\n            history,\r\n            roomId,\r\n          });\r\n        }}\r\n      >\r\n        {loading ? <Spinner /> : buttonMessage}\r\n      </Button>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  margin-top: 100px;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 400px;\r\n  height: 50px;\r\n  color: black;\r\n  border-radius: 30px;\r\n  border: none;\r\n  text-align: center;\r\n  font-size: 40px;\r\n  margin-bottom: 15px;\r\n\r\n  :focus {\r\n    outline: none;\r\n    box-shadow: 0 0 5px black;\r\n  }\r\n`;\r\n\r\nexport default SignInHost;\r\n","const hostHandler = ({ nickName, setNickName, setCurrentUser, history }) => {\r\n  fetch(\"https://you-beat-me-to-it.herokuapp.com/createRoom\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify({\r\n      nickName: nickName,\r\n    }),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      setNickName(\"\");\r\n      setCurrentUser(data.userInfo);\r\n      history.push(`/lobby/${data.roomInfo.roomId}`);\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport default hostHandler;\r\n","const PlayerHandler = ({\r\n  nickName,\r\n  setNickName,\r\n  setCurrentUser,\r\n  history,\r\n  roomId,\r\n}) => {\r\n  fetch(`https://you-beat-me-to-it.herokuapp.com/${roomId}/createUser`, {\r\n    method: \"POST\",\r\n    body: JSON.stringify({\r\n      nickName: nickName,\r\n    }),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      setNickName(\"\");\r\n      setCurrentUser(data.userInfo);\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport default PlayerHandler;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\n\r\nconst Results = ({ setIsOpen }) => {\r\n  const { playlistState, selectPlaylist } = React.useContext(LobbyContext);\r\n  const [animation, setAnimation] = React.useState(\"open\");\r\n\r\n  if (playlistState.searchResults.length === 0) {\r\n    return (\r\n      <Wrapper\r\n        style={{ height: \"50px\", display: \"flex\", alignItems: \"center\" }}\r\n        animation={animation}\r\n        onAnimationEnd={() => {\r\n          if (animation === \"close\") {\r\n            setIsOpen(false);\r\n          }\r\n        }}\r\n      >\r\n        No Results found\r\n      </Wrapper>\r\n    );\r\n  }\r\n  return (\r\n    <Wrapper\r\n      animation={animation}\r\n      onAnimationEnd={() => {\r\n        if (animation === \"close\") {\r\n          setIsOpen(false);\r\n        }\r\n      }}\r\n    >\r\n      {playlistState.searchResults.map((item) => {\r\n        return (\r\n          <ResultWrapper\r\n            key={item.id}\r\n            onClick={() => {\r\n              selectPlaylist(item);\r\n              // setIsOpen(false);\r\n              setAnimation(\"close\");\r\n            }}\r\n          >\r\n            <Image src={item.picture_medium} />\r\n            <ResultsInfo>\r\n              <Title>{item.title}</Title>\r\n              <Tracks>{item.nb_tracks} tracks</Tracks>\r\n            </ResultsInfo>\r\n          </ResultWrapper>\r\n        );\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Results;\r\n\r\nconst Open = keyframes`\r\nfrom{\r\n  transform: scaleY(0)\r\n}to{\r\n  transform: scaleY(1)\r\n}\r\n`;\r\n\r\nconst Close = keyframes`\r\nfrom{\r\n  transform: scaleY(1)\r\n}to{\r\n  transform: scaleY(0)\r\n}\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  font-size: 30px;\r\n  max-height: 300px;\r\n  overflow: scroll;\r\n  color: black;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  background: white;\r\n  margin-bottom: 15px;\r\n  overflow-x: hidden;\r\n  transform-origin: top;\r\n  animation: ${(props) => (props.animation === \"open\" ? Open : Close)} 220ms\r\n    ease-in-out;\r\n  animation-fill-mode: forwards;\r\n`;\r\n\r\nconst ResultWrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  padding: 10px;\r\n  cursor: pointer;\r\n  :hover {\r\n    background: #eadaf0;\r\n  }\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 75px;\r\n  height: 75px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ResultsInfo = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  width: 90%;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst Tracks = styled.p`\r\n  font-size: 70%;\r\n  font-weight: 400;\r\n  color: lightgrey;\r\n`;\r\n","export const ip = \"https://you-beat-me-to-it.herokuapp.com\";\r\n// export const ip = \"http://localhost:8000\";\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\n// import Button from \"../Button/Button\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport Results from \"./Results\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { ip } from \"../../ip\";\r\n\r\nfunction searchToUrl(searchTerm) {\r\n  const searchArray = searchTerm.split(\" \");\r\n  const searchString = searchArray.join(\"%20\");\r\n  return searchString;\r\n}\r\n\r\nconst Search = () => {\r\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\r\n  const [isOpen, setIsOpen] = React.useState(\"false\");\r\n  const { playlistState, startSearch, receivePlaylists } = React.useContext(\r\n    LobbyContext\r\n  );\r\n  return (\r\n    <SearchPlaylist>\r\n      <GenericLabel>Search for a playlist:</GenericLabel>\r\n      <TopBar>\r\n        <Input\r\n          value={searchTerm}\r\n          placeholder=\"Ex: Best of the 80's\"\r\n          onChange={(ev) => setSearchTerm(ev.target.value)}\r\n          onKeyDown={(ev) => {\r\n            switch (ev.key) {\r\n              case \"Enter\": {\r\n                if (searchTerm.length > 1) {\r\n                  startSearch();\r\n                  let string = searchToUrl(searchTerm);\r\n                  fetch(`${ip}/searchPlaylist?searchTerm=${string}`, {\r\n                    method: \"GET\",\r\n                    headers: {\r\n                      Accept: \"application/json\",\r\n                      \"Content-Type\": \"application/json\",\r\n                    },\r\n                  })\r\n                    .then((res) => res.json())\r\n                    .then((data) => {\r\n                      receivePlaylists(data.searchResults);\r\n                      setIsOpen(true);\r\n                    });\r\n                }\r\n                break;\r\n              }\r\n              default: {\r\n              }\r\n            }\r\n          }}\r\n        />\r\n        {playlistState.loadState === \"loading\" && (\r\n          <SpinnerPosition>\r\n            <Spinner size={35} color={\"grey\"} />\r\n          </SpinnerPosition>\r\n        )}\r\n      </TopBar>\r\n      {playlistState.loadState === \"idle\" &&\r\n      playlistState.searchResults !== null &&\r\n      isOpen === true ? (\r\n        <Results setIsOpen={setIsOpen} />\r\n      ) : null}\r\n    </SearchPlaylist>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n\r\nconst SearchPlaylist = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  width: 100%;\r\n`;\r\n\r\nconst TopBar = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n  width: 100%;\r\n  position: relative;\r\n`;\r\n\r\nconst SpinnerPosition = styled.div`\r\n  width: fit-content;\r\n  position: absolute;\r\n  right: 20px;\r\n  top: 20px;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  height: 55px;\r\n  color: black;\r\n  border-radius: 40px;\r\n  border: none;\r\n  text-align: left;\r\n  font-size: 40px;\r\n  padding: 0 30px;\r\n  margin-top: 10px;\r\n\r\n  :focus {\r\n    outline: none;\r\n    border: 1px solid red;\r\n  }\r\n\r\n  &::placeholder {\r\n    color: #eadaf0;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport { FiX } from \"react-icons/fi\";\r\nimport { ip } from \"../../ip\";\r\n\r\nconst SelectedPlaylist = () => {\r\n  const { playlistState, deletePlaylist } = React.useContext(LobbyContext);\r\n  const { roomId } = useParams();\r\n\r\n  React.useEffect(() => {\r\n    fetch(`${ip}/updatePlaylist`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({\r\n        selectedPlaylist: playlistState.selectedPlaylist,\r\n        roomId: roomId,\r\n      }),\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, [playlistState.selectedPlaylist, roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Selected Playlist:</GenericLabel>\r\n      {Object.values(playlistState.selectedPlaylist).map((item) => {\r\n        return (\r\n          <ResultWrapper key={item.id} onClick={() => {}}>\r\n            <Image src={item.picture_medium} />\r\n            <ResultsInfo>\r\n              <Title>{item.title}</Title>\r\n              <Tracks>{item.nb_tracks} tracks</Tracks>\r\n            </ResultsInfo>\r\n            <Icon\r\n              onClick={(ev) => {\r\n                deletePlaylist(item);\r\n              }}\r\n            >\r\n              <FiX size={35} color={\"lightgray\"} />\r\n            </Icon>\r\n          </ResultWrapper>\r\n        );\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default SelectedPlaylist;\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n  padding-right: 20px;\r\n`;\r\n\r\nconst ResultWrapper = styled.div`\r\n  background: white;\r\n  border-radius: 15px;\r\n  width: fit-content;\r\n  max-width: 100%;\r\n  display: flex;\r\n  padding: 10px;\r\n  position: relative;\r\n  min-width: 50%;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 75px;\r\n  height: 75px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ResultsInfo = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  width: 80%;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst Tracks = styled.p`\r\n  font-size: 70%;\r\n  font-weight: 400;\r\n  color: lightgrey;\r\n`;\r\n\r\nconst Icon = styled.button`\r\n  color: red;\r\n  position: absolute;\r\n  border: none;\r\n  cursor: pointer;\r\n  top: 0;\r\n  right: 0;\r\n  background: none;\r\n`;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport COLORS from \"../../COLORS\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { AiFillCrown } from \"react-icons/ai\";\r\n\r\nconst Users = () => {\r\n  const { usersList, currentUser, setCurrentRoomId } = React.useContext(\r\n    CurrentUserContext\r\n  );\r\n\r\n  const { roomId } = useParams();\r\n  const [isCopied, setIsCopied] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    setCurrentRoomId(roomId);\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Players:</GenericLabel>\r\n      {usersList !== null ? (\r\n        <List>\r\n          {usersList.map((user, index) => {\r\n            return (\r\n              <User\r\n                key={user.nickName + index}\r\n                style={{\r\n                  color: `${\r\n                    currentUser.playerId === user.playerId\r\n                      ? COLORS.midnight\r\n                      : \"black\"\r\n                  }`,\r\n                }}\r\n              >\r\n                {user.role === \"host\" ? (\r\n                  <Icon>\r\n                    <AiFillCrown />\r\n                  </Icon>\r\n                ) : null}\r\n                {user.nickName}\r\n              </User>\r\n            );\r\n          })}\r\n          <StyledButton\r\n            isCopied={isCopied}\r\n            onClick={() => {\r\n              setIsCopied(true);\r\n              navigator.clipboard.writeText(window.location);\r\n            }}\r\n            onAnimationEnd={() => {\r\n              setIsCopied(false);\r\n            }}\r\n          >\r\n            {isCopied ? \"Copied !\" : \"Copy Invite Link\"}\r\n          </StyledButton>\r\n        </List>\r\n      ) : null}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n`;\r\n\r\nconst List = styled.div`\r\n  background: white;\r\n  border-radius: 15px;\r\n  padding: 10px 30px;\r\n  min-width: 50%;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nconst User = styled.div`\r\n  margin-bottom: 5px;\r\n  position: relative;\r\n`;\r\n\r\nconst Icon = styled.div`\r\n  width: fit-content;\r\n  position: absolute;\r\n  left: 0;\r\n  transform: translateX(-100%);\r\n  margin: 0;\r\n`;\r\n\r\nconst ColorsAnimation = keyframes`\r\n0%{\r\n  background-position: 0% 0%;\r\n  );\r\n}20%{\r\n  background-position: 100% 0%;\r\n} 80% {\r\n  background-position: 100% 0%;\r\n}\r\n100%{\r\n  background-position: 0% 0%;\r\n}`;\r\n\r\nconst StyledButton = styled.button`\r\n  height: 50px;\r\n  border-radius: 30px;\r\n  font-weight: 700;\r\n  width: 80%;\r\n  padding: 5px 20px;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  color: white;\r\n  border: none;\r\n  background: linear-gradient(\r\n    to right,\r\n    ${COLORS.tertiary},\r\n    ${COLORS.secondary},\r\n    #34eb98,\r\n    #34eb98,\r\n    #34eb98\r\n  );\r\n  background-size: 300% 100%;\r\n  overflow: hidden;\r\n  animation: ${(Props) => (Props.isCopied ? ColorsAnimation : null)} 2000ms\r\n    ease-in-out;\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport * as firebase from \"firebase\";\r\n\r\nconst SelectedPlaylistPlayer = () => {\r\n  const { playlistState, selectPlaylist, deletePlaylist } = React.useContext(\r\n    LobbyContext\r\n  );\r\n  const { roomId } = useParams();\r\n\r\n  React.useEffect(() => {\r\n    const selectedPlaylistRef = firebase\r\n      .database()\r\n      .ref(`Rooms/${roomId}/selectedPlaylist`);\r\n\r\n    selectedPlaylistRef.on(\"value\", (snapshot) => {\r\n      const playlist = snapshot.val();\r\n\r\n      if (playlist === false) {\r\n        deletePlaylist();\r\n      } else if (playlist) {\r\n        selectPlaylist(Object.values(playlist)[0]);\r\n      }\r\n    });\r\n  }, [roomId, deletePlaylist, selectPlaylist]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Selected Playlist:</GenericLabel>\r\n      {Object.values(playlistState.selectedPlaylist).map((item) => {\r\n        return (\r\n          <ResultWrapper key={item.id}>\r\n            <Image src={item.picture_medium} />\r\n            <ResultsInfo>\r\n              <Title>{item.title}</Title>\r\n              <Tracks>{item.nb_tracks} tracks</Tracks>\r\n            </ResultsInfo>\r\n          </ResultWrapper>\r\n        );\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default SelectedPlaylistPlayer;\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n  padding-right: 20px;\r\n`;\r\n\r\nconst ResultWrapper = styled.div`\r\n  background: white;\r\n  border-radius: 15px;\r\n  width: fit-content;\r\n  max-width: 100%;\r\n  display: flex;\r\n  padding: 10px;\r\n  position: relative;\r\n  min-width: 50%;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 75px;\r\n  height: 75px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ResultsInfo = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  width: 80%;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst Tracks = styled.p`\r\n  font-size: 70%;\r\n  font-weight: 400;\r\n  color: lightgrey;\r\n`;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport COLORS from \"../../COLORS\";\r\nimport Search from \"./Search\";\r\nimport SelectedPlaylist from \"./SelectedPlaylist\";\r\nimport Users from \"./Users\";\r\nimport SelectedPlaylistPlayer from \"./SelectedPlaylistPlayer\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { ip } from \"../../ip\";\r\n\r\nconst validatePlaylist = async (roomId, playlist) => {\r\n  const promise = await new Promise((resolve, reject) => {\r\n    fetch(`${ip}/validatePlaylist`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({ roomId, selectedPlaylist: playlist }),\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n        resolve(data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        reject(err);\r\n      });\r\n  });\r\n\r\n  return promise;\r\n};\r\n\r\nconst HostLobby = () => {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState(false);\r\n  const { currentUser } = React.useContext(CurrentUserContext);\r\n  const { playlistState, location } = React.useContext(LobbyContext);\r\n  const { gameStarted } = React.useContext(GameRoomContext);\r\n  const { roomId } = useParams();\r\n  const history = useHistory();\r\n  console.log(\"error\", error);\r\n  React.useEffect(() => {\r\n    if (location === \"gameRoom\" && gameStarted === false) {\r\n      history.push(`/gameroom/${roomId}`);\r\n    }\r\n  }, [roomId, location]);\r\n\r\n  if (currentUser.role === \"player\") {\r\n    return (\r\n      <Wrapper>\r\n        <BottomSection>\r\n          <SelectedPlaylistPlayer />\r\n          <Users />\r\n        </BottomSection>\r\n        <Text>\r\n          Please wait for the host to select a playlist and to start game ...\r\n        </Text>\r\n      </Wrapper>\r\n    );\r\n  }\r\n  return (\r\n    <Wrapper>\r\n      <Search />\r\n      <BottomSection>\r\n        <SelectedPlaylist />\r\n        <Users />\r\n      </BottomSection>\r\n      <ButtonWrapper>\r\n        {error && <ErrorMessage>Please select a playlist</ErrorMessage>}\r\n        <BigButton\r\n          onClick={async () => {\r\n            if (Object.keys(playlistState.selectedPlaylist).length > 0) {\r\n              setError(false);\r\n              setLoading(true);\r\n              await validatePlaylist(roomId, playlistState.selectedPlaylist);\r\n            } else {\r\n              setError(true);\r\n            }\r\n          }}\r\n        >\r\n          {loading ? <Spinner /> : \"Start Game\"}\r\n        </BigButton>\r\n      </ButtonWrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\nconst Wrapper = styled.div`\r\n  margin-top: 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0 40px;\r\n  align-items: center;\r\n`;\r\n\r\nconst BottomSection = styled.div`\r\n  margin-top: 20px;\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: 50% 50%;\r\n`;\r\n\r\nconst ButtonWrapper = styled.div`\r\n  margin: 50px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  position: relative;\r\n`;\r\n\r\nconst BigButton = styled.button`\r\n  border-radius: 30px;\r\n  /* font-weight: 700; */\r\n  /* font-family: \"Echizen\"; */\r\n  font-size: 40px;\r\n  padding: 5px 20px;\r\n  cursor: pointer;\r\n  color: white;\r\n  border: none;\r\n  background: linear-gradient(to right, #ff33be, ${COLORS.midnight});\r\n  transition: filter 0.3s;\r\n\r\n  :hover {\r\n    filter: saturate(150%);\r\n  }\r\n  :focus {\r\n    outline: none;\r\n    border: 1px solid white;\r\n    border-radius: 30px;\r\n  }\r\n`;\r\n\r\nconst ErrorAnimation = keyframes`\r\nfrom{\r\n  opacity: 0;\r\n  transform: translateY(100%)\r\n}to{\r\n  opacity: 1;\r\n  transform: translateY(0%)\r\n}`;\r\n\r\nconst ErrorMessage = styled.div`\r\n  font-size: 20px;\r\n  color: white;\r\n  animation: ${ErrorAnimation} 200ms ease-in-out;\r\n  position: absolute;\r\n  top: -25px;\r\n`;\r\n\r\nconst Text = styled.div`\r\n  font-family: \"Echizen\";\r\n  font-size: 60px;\r\n  text-align: center;\r\n  color: white;\r\n  margin: 50px 0;\r\n  text-shadow: 2px 2px 2px ${COLORS.midnight};\r\n`;\r\n\r\nexport default HostLobby;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Label from \"../Labels/GenericLabel\";\r\nimport COLORS from \"../../COLORS\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\n\r\nconst ErrorScreen = ({ title, message, spinner }) => {\r\n  return (\r\n    <Wrapper>\r\n      <Label>{title}</Label>\r\n      <Message>{message}</Message>\r\n      {spinner && <Spinner color={COLORS.midnight} size={40} />}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default ErrorScreen;\r\n\r\nconst Wrapper = styled.div`\r\n  margin-top: 50px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Message = styled.div`\r\n  margin-top: 5px;\r\n  font-family: \"Echizen\";\r\n  text-shadow: 2px 2px ${COLORS.midnight};\r\n  color: white;\r\n  font-size: 40px;\r\n  width: 60%;\r\n  text-align: center;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Label from \"../Labels/GenericLabel\";\r\nimport COLORS from \"../../COLORS\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst GameInProgress = () => {\r\n  const { roomId } = useParams();\r\n  const { round, setRoomId } = React.useContext(GameRoomContext);\r\n  React.useEffect(() => {\r\n    setRoomId(roomId);\r\n  }, []);\r\n  return (\r\n    <Wrapper>\r\n      <Label>The Game is in Progress</Label>\r\n      <Message>\r\n        Please be patient while the game is in progress. You will be able to\r\n        join when the game ends and the host returns to the lobby.\r\n      </Message>\r\n      <RoundCounter>\r\n        The game you are trying to join is on round :{\" \"}\r\n        <RoundSpan>\r\n          {\" \"}\r\n          {round <= 9 ? round + 1 : round}\r\n          /10\r\n        </RoundSpan>\r\n      </RoundCounter>\r\n      <Spinner color={COLORS.midnight} size={40} />\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default GameInProgress;\r\n\r\nconst Wrapper = styled.div`\r\n  margin-top: 50px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Message = styled.div`\r\n  margin-top: 5px;\r\n  font-family: \"Echizen\";\r\n  text-shadow: 2px 2px ${COLORS.midnight};\r\n  color: white;\r\n  font-size: 40px;\r\n  width: 60%;\r\n  text-align: center;\r\n`;\r\n\r\nconst RoundCounter = styled.div`\r\n  margin-top: 10px;\r\n  font-family: \"Echizen\";\r\n  text-shadow: 2px 2px ${COLORS.midnight};\r\n  color: white;\r\n  font-size: 40px;\r\n  width: 60%;\r\n  text-align: center;\r\n`;\r\n\r\nconst RoundSpan = styled.span`\r\n  font-size: 40px;\r\n  color: ${COLORS.secondary};\r\n  text-shadow: 2px 2px white;\r\n  font-family: \"Echizen\";\r\n`;\r\n","import React from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport PlayerHandler from \"../SignIn/PlayerHandler\";\r\nimport SignIn from \"../SignIn/SignIn\";\r\nimport HostLobby from \"../Lobby/HostLobby\";\r\nimport ErrorScreen from \"../ErrorScreen/ErrorScreen\";\r\nimport GameInProgress from \"../ErrorScreen/GameInProgress\";\r\nimport { ip } from \"../../ip\";\r\nimport * as firebase from \"firebase\";\r\n\r\nconst LobbyWrapper = () => {\r\n  const {\r\n    currentUser,\r\n    setCurrentUser,\r\n    isHostPresent,\r\n    setCurrentRoomId,\r\n  } = React.useContext(CurrentUserContext);\r\n  const {\r\n    setRoomId,\r\n    roomExists,\r\n    setRoomExists,\r\n    location,\r\n    deletePlaylist,\r\n  } = React.useContext(LobbyContext);\r\n  const { setGameStarted, setHistoryArray } = React.useContext(GameRoomContext);\r\n\r\n  const { roomId } = useParams();\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    const roomRef = firebase.database().ref(`Rooms/${roomId}`);\r\n\r\n    roomRef.on(\"value\", (snapshot) => {\r\n      setRoomExists(snapshot.exists());\r\n    });\r\n\r\n    return () => {\r\n      roomRef.off();\r\n    };\r\n  }, [roomId]);\r\n\r\n  React.useEffect(() => {\r\n    setRoomId(roomId);\r\n    setCurrentRoomId(roomId);\r\n  }, [roomId]);\r\n\r\n  React.useEffect(() => {\r\n    console.log(history.action);\r\n\r\n    return () => {\r\n      console.log(history.action);\r\n      if (history.action === \"POP\" && location === \"lobby\" && currentUser)\r\n        if (\r\n          window.confirm(\"do you really want to leave ?\") &&\r\n          currentUser !== null\r\n        ) {\r\n          setCurrentUser(null);\r\n          setGameStarted(false);\r\n          deletePlaylist();\r\n          setHistoryArray([]);\r\n          fetch(`${ip}/deleteUser`, {\r\n            method: \"DELETE\",\r\n            body: JSON.stringify({ currentUser, roomId }),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          })\r\n            .then((res) => res.json())\r\n            .then((data) => console.log(data));\r\n          history.push(\"/\");\r\n          return;\r\n        } else if (location === \"lobby\") {\r\n          console.log(\"history push from Lobby\");\r\n          history.push(`/lobby/${roomId}`);\r\n        }\r\n    };\r\n  }, [history, location]);\r\n\r\n  if (roomExists === false) {\r\n    return (\r\n      <ErrorScreen\r\n        title=\"404 - Room not found\"\r\n        message=\"We're sorry, we couldn't find the room you are trying to join\"\r\n      />\r\n    );\r\n  }\r\n  if (isHostPresent === false) {\r\n    return (\r\n      <ErrorScreen\r\n        title=\"The host has left\"\r\n        message=\"We're sorry, the host has left and the game has ended. Return to the homepage to start a new game.\"\r\n      />\r\n    );\r\n  }\r\n  if (\r\n    !currentUser &&\r\n    roomExists === true &&\r\n    isHostPresent === true &&\r\n    location === \"gameRoom\"\r\n  ) {\r\n    return <GameInProgress />;\r\n  }\r\n  if (\r\n    !currentUser &&\r\n    roomExists === true &&\r\n    isHostPresent === true &&\r\n    location === \"lobby\"\r\n  ) {\r\n    return (\r\n      <SignIn\r\n        buttonHandler={PlayerHandler}\r\n        buttonMessage=\"Join your friends game !\"\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {roomExists === true && isHostPresent === true && currentUser ? (\r\n        <HostLobby />\r\n      ) : (\r\n        <Spinner size={50} color={\"lightgrey\"} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LobbyWrapper;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\n\r\nconst ProgressBar = () => {\r\n  const { gamePhase } = React.useContext(GameRoomContext);\r\n  const { currentTrackGuesses } = React.useContext(CurrentUserContext);\r\n  const barRef = React.useRef(null);\r\n\r\n  const calculateGuessPosition = (time) => {\r\n    if (barRef !== null) {\r\n      let position = (time * barRef.current.clientWidth) / 30;\r\n      position.toFixed(0);\r\n      return position;\r\n    }\r\n  };\r\n  return (\r\n    <Wrapper>\r\n      <Bar gamePhase={gamePhase} ref={barRef}></Bar>\r\n      {currentTrackGuesses &&\r\n        Object.values(currentTrackGuesses).map((guess) => {\r\n          if (guess.artist && guess.songName) {\r\n            return (\r\n              <Guess position={calculateGuessPosition(guess.time)}>\r\n                {guess.nickName}\r\n                <Tip />\r\n              </Guess>\r\n            );\r\n          }\r\n        })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default ProgressBar;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  background: #eadaf0;\r\n  height: 10px;\r\n  border-radius: 40px;\r\n  margin-top: 10px;\r\n  position: relative;\r\n`;\r\n\r\nconst Transform = keyframes`\r\n0%{\r\n  transform:scaleX(1)\r\n}100%{\r\n  transform: scaleX(0)\r\n}\r\n`;\r\nconst Bar = styled.div`\r\n  height: 10px;\r\n  width: 100%;\r\n  border-radius: 40px;\r\n  background: #ff33be;\r\n  transform-origin: right;\r\n  animation: ${(props) => (props.gamePhase === \"playing\" ? Transform : null)}\r\n    31000ms linear;\r\n`;\r\n\r\nconst Guess = styled.div`\r\n  width: 150px;\r\n  font-size: 15px;\r\n  border-radius: 10px;\r\n  height: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: white;\r\n  margin-top: 10px;\r\n  position: absolute;\r\n  top: 10px;\r\n  left: ${(props) => props.position}px;\r\n  transform: translateX(-50%);\r\n  z-index: 5;\r\n`;\r\n\r\nconst Tip = styled.div`\r\n  position: absolute;\r\n  z-index: -5;\r\n  background: white;\r\n  height: 30px;\r\n  width: 30px;\r\n  transform: rotate(45deg) translateX(-20%) translateY(-20%);\r\n`;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport cassette from \"../../assets/cassette.png\";\r\nimport COLORS from \"../../COLORS\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\n\r\nconst Cassette = ({ time }) => {\r\n  const { result, trackInfo, gamePhase } = React.useContext(GameRoomContext);\r\n  const [artist, setArtist] = React.useState(null);\r\n  const [songName, setSongName] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    if (gamePhase === \"loading\") {\r\n      setArtist(null);\r\n      setSongName(null);\r\n    }\r\n    if (result === \"success\") {\r\n      setArtist(trackInfo.artist.name);\r\n      setSongName(trackInfo.title_short);\r\n    }\r\n    if (result === \"artist\") {\r\n      setArtist(trackInfo.artist.name);\r\n    }\r\n    if (result === \"songName\") {\r\n      setSongName(trackInfo.title_short);\r\n    }\r\n  }, [result, gamePhase]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Image src={cassette}></Image>\r\n      <Counter>{time}</Counter>\r\n      <Label>\r\n        <SongName>\r\n          <PlaceHolder>\r\n            {songName && (\r\n              <SongNameSpan songName={songName}>\r\n                {songName && songName}\r\n              </SongNameSpan>\r\n            )}\r\n          </PlaceHolder>\r\n\r\n          <Separator>/</Separator>\r\n          <PlaceHolder>\r\n            {artist && (\r\n              <ArtistSpan artist={artist}>{artist && artist}</ArtistSpan>\r\n            )}\r\n          </PlaceHolder>\r\n        </SongName>\r\n      </Label>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Cassette;\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  position: relative;\r\n  margin-bottom: -50px;\r\n  /* margin-top: 50px; */\r\n  transform: scale(0.8);\r\n`;\r\n\r\nconst Appear = keyframes`\r\nfrom{\r\n  width: 0;\r\n}\r\nto{\r\n  width: 100%;\r\n}`;\r\n\r\nconst SongNameSpan = styled.div`\r\n  font-family: \"Echizen\";\r\n  color: black;\r\n  /* width: 250px; */\r\n\r\n  max-width: 100%;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 40px;\r\n  transform-origin: left;\r\n  animation: ${(props) =>\r\n      props.songName !== null || props.artist !== null ? Appear : null}\r\n    500ms;\r\n`;\r\n\r\nconst ArtistSpan = styled.div`\r\n  font-family: \"Echizen\";\r\n  color: black;\r\n  /* width: 250px; */\r\n  max-width: 100%;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 40px;\r\n  transform-origin: left;\r\n  animation: ${(props) =>\r\n      props.songName !== null || props.artist !== null ? Appear : null}\r\n    500ms ease-in-out;\r\n`;\r\nconst PlaceHolder = styled.div`\r\n  width: 50%;\r\n  max-width: 50%;\r\n`;\r\n\r\nconst Separator = styled.div`\r\n  font-family: \"Echizen\";\r\n`;\r\nconst Image = styled.img`\r\n  filter: invert(21%) sepia(23%) saturate(7482%) hue-rotate(259deg)\r\n    brightness(87%) contrast(91%);\r\n`;\r\n\r\nconst Counter = styled.div`\r\n  width: fit-content;\r\n  position: absolute;\r\n  top: 140px;\r\n  font-size: 60px;\r\n  color: ${COLORS.midnight};\r\n  font-family: \"Digital\";\r\n`;\r\n\r\nconst Label = styled.div`\r\n  border: 4px solid ${COLORS.midnight};\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: white;\r\n  position: absolute;\r\n  width: 500px;\r\n  padding: 10px 50px;\r\n  top: 45px;\r\n  /* text-shadow: 2px 2px 2px ${COLORS.midnight}; */\r\n`;\r\n\r\nconst SongName = styled.div`\r\n  border-bottom: 2px solid ${COLORS.midnight};\r\n  height: 35px;\r\n  font-family: \"Echizen\";\r\n  display: flex;\r\n  /* justify-content: center; */\r\n  color: black;\r\n  text-align: center;\r\n  font-size: 40px;\r\n`;\r\n","import leven from \"leven\";\r\n\r\nconst calculateDistance = (searchTerm, artistOrSongName, valueToSearch) => {\r\n  const artistOrSong = artistOrSongName.toLowerCase();\r\n  const wordsArray = searchTerm.toLowerCase().split(\" \");\r\n  let allSubStrings = [...wordsArray];\r\n\r\n  wordsArray.forEach((word, index) => {\r\n    let string = \"\";\r\n    for (let i = 0; i <= index; i++) {\r\n      string = string + \" \" + wordsArray[i];\r\n    }\r\n    allSubStrings.push(string.trim());\r\n  });\r\n\r\n  wordsArray.forEach((word, index) => {\r\n    let newArray = wordsArray.slice(index);\r\n    allSubStrings.push(newArray.join(\" \").trim());\r\n  });\r\n  let ArtistResultMap = allSubStrings.map((item) => {\r\n    return {\r\n      searchTerm: item,\r\n      searchingFor: valueToSearch,\r\n      distance: leven(item, `${artistOrSong}`),\r\n    };\r\n  });\r\n  ArtistResultMap = ArtistResultMap.sort((a, b) => {\r\n    return a.distance - b.distance;\r\n  });\r\n\r\n  let marginOfError = Math.floor((artistOrSong.length / 10) * 4);\r\n  if (marginOfError > 5) {\r\n    marginOfError = 5;\r\n  }\r\n\r\n  if (ArtistResultMap[0].distance < marginOfError) {\r\n    return {\r\n      [`${valueToSearch}`]: true,\r\n      distance: ArtistResultMap[0].distance,\r\n      marginOfError: marginOfError,\r\n    };\r\n  } else {\r\n    return {\r\n      [`${valueToSearch}`]: false,\r\n      distance: ArtistResultMap[0].distance,\r\n      marginOfError: marginOfError,\r\n    };\r\n  }\r\n};\r\n\r\n// const levenTestResult = calculateDistance(\r\n//   \"the beatles\",\r\n//   \"the beach boys\",\r\n//   \"songName\"\r\n// );\r\n\r\n// console.log(levenTestResult);\r\n\r\nexport default calculateDistance;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport calculateDistance from \"./LevenTest\";\r\nimport { ip } from \"../../ip\";\r\n\r\nfunction fetchHelper(roomId, currentUser, correctGuess) {\r\n  fetch(`${ip}/validateAnswer`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify({\r\n      currentUser: currentUser,\r\n      roomId: roomId,\r\n      correctGuess,\r\n    }),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => console.log(data))\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nconst SearchBar = () => {\r\n  const { roomId } = useParams();\r\n  const { currentUser, correctGuess, setCorrectGuess } = React.useContext(\r\n    CurrentUserContext\r\n  );\r\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\r\n  const [placeHolderText, setPlaceHolderText] = React.useState(\r\n    \"Prepare for your first song !\"\r\n  );\r\n\r\n  const { gamePhase, result, setResult, trackInfo, round } = React.useContext(\r\n    GameRoomContext\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (gamePhase === \"loading\") {\r\n      setCorrectGuess({ artist: false, songName: false });\r\n      setResult(null);\r\n      setSearchTerm(\"\");\r\n\r\n      if (round === 10) {\r\n        setPlaceHolderText(\"Prepare for final ranking !\");\r\n        return;\r\n      }\r\n      if (round === 0) {\r\n        setPlaceHolderText(\"Prepare for your first song !\");\r\n        return;\r\n      }\r\n      setPlaceHolderText(\"Prepare for next song !\");\r\n    }\r\n    if (gamePhase === \"playing\") {\r\n      setPlaceHolderText(\"Guess the song and the artist !\");\r\n    }\r\n  }, [gamePhase, round]);\r\n\r\n  React.useEffect(() => {\r\n    if (result === \"success\") {\r\n      setPlaceHolderText(\"You got the correct answer !\");\r\n    }\r\n    if (result === \"artist\") {\r\n      setPlaceHolderText(\"Now guess the song name !\");\r\n    }\r\n    if (result === \"songName\") {\r\n      setPlaceHolderText(\"Now guess the artist !\");\r\n    }\r\n  }, [result]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Input\r\n        result={result}\r\n        value={searchTerm}\r\n        placeholder={placeHolderText}\r\n        onChange={(ev) => {\r\n          setSearchTerm(ev.target.value);\r\n        }}\r\n        onAnimationEnd={(ev) => {\r\n          setResult(null);\r\n        }}\r\n        onKeyDown={(ev) => {\r\n          if (\r\n            ev.key === \"Enter\" &&\r\n            gamePhase === \"playing\" &&\r\n            result !== \"success\"\r\n          ) {\r\n            const artist = trackInfo.artist.name.toLowerCase();\r\n\r\n            const songName = trackInfo.title_short\r\n              .split(\"(\")[0]\r\n              .toLowerCase()\r\n              .trim();\r\n\r\n            const artistResult = calculateDistance(\r\n              searchTerm,\r\n              artist,\r\n              \"artist\"\r\n            );\r\n            const songNameResult = calculateDistance(\r\n              searchTerm,\r\n              songName,\r\n              \"songName\"\r\n            );\r\n            const d = new Date();\r\n            const timeStamp = d.getTime();\r\n\r\n            setSearchTerm(\"\");\r\n\r\n            if (\r\n              artistResult.artist === false &&\r\n              songNameResult.songName === false\r\n            ) {\r\n              setResult(\"fail\");\r\n              return;\r\n            }\r\n\r\n            if (artistResult.artist && songNameResult.songName) {\r\n              setResult(\"success\");\r\n              setCorrectGuess({\r\n                artist: true,\r\n                songName: true,\r\n              });\r\n              fetchHelper(roomId, currentUser, {\r\n                artist: true,\r\n                songName: true,\r\n                timeStamp: timeStamp,\r\n                previousGuess: correctGuess,\r\n              });\r\n              return;\r\n            }\r\n\r\n            if (artistResult.artist) {\r\n              if (\r\n                correctGuess.songName === true &&\r\n                correctGuess.artist === false\r\n              ) {\r\n                setResult(\"success\");\r\n                setCorrectGuess({ artist: true, songName: true });\r\n                fetchHelper(roomId, currentUser, {\r\n                  artist: true,\r\n                  songName: true,\r\n                  timeStamp: timeStamp,\r\n                  previousGuess: correctGuess,\r\n                });\r\n                return;\r\n              }\r\n              setResult(\"artist\");\r\n              setCorrectGuess({ artist: true, songName: false });\r\n              fetchHelper(roomId, currentUser, {\r\n                artist: true,\r\n                songName: false,\r\n                timeStamp: null,\r\n                previousGuess: correctGuess,\r\n              });\r\n              return;\r\n            }\r\n\r\n            if (songNameResult.songName) {\r\n              if (\r\n                correctGuess.songName === false &&\r\n                correctGuess.artist === true\r\n              ) {\r\n                setResult(\"success\");\r\n                setCorrectGuess({ artist: true, songName: true });\r\n                fetchHelper(roomId, currentUser, {\r\n                  artist: true,\r\n                  songName: true,\r\n                  timeStamp: timeStamp,\r\n                  previousGuess: correctGuess,\r\n                });\r\n                return;\r\n              }\r\n              setResult(\"songName\");\r\n              setCorrectGuess({ artist: false, songName: true });\r\n              fetchHelper(roomId, currentUser, {\r\n                artist: false,\r\n                songName: true,\r\n                timeStamp: null,\r\n                previousGuess: correctGuess,\r\n              });\r\n              return;\r\n            }\r\n          }\r\n        }}\r\n      />\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default SearchBar;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Fail = keyframes`\r\n0%{\r\n  transform: translateX(0)\r\n}\r\n20%{\r\n  transform: translateX(15px)\r\n}\r\n40%{\r\n  transform: translateX(0px)\r\n}\r\n60%{\r\n  transform: translateX(-15px)\r\n}\r\n100%{\r\n  transform: translateX(0px)\r\n}\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  height: 55px;\r\n  color: black;\r\n  border-radius: 40px;\r\n  border: none;\r\n  text-align: left;\r\n  font-size: 40px;\r\n  padding: 0 30px;\r\n  margin-top: 10px;\r\n\r\n  &::placeholder {\r\n    color: ${(props) => (props.result === \"success\" ? \" #34eb98\" : \"#eadaf0\")};\r\n  }\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n\r\n  animation: ${(props) => (props.result === \"fail\" ? Fail : null)} 500ms\r\n    ease-in-out;\r\n`;\r\n","import React from \"react\";\r\nimport COLORS from \"../../COLORS\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst PreviousSong = () => {\r\n  const { roomId } = useParams();\r\n  const { historyArray, round, setRoomId } = React.useContext(GameRoomContext);\r\n\r\n  React.useEffect(() => {\r\n    setRoomId(roomId);\r\n  }, [roomId, setRoomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Previous Songs:</GenericLabel>\r\n      <SongListWrapper>\r\n        <RoundCounter>Round: {round < 10 ? round + 1 : round}/10</RoundCounter>\r\n        {historyArray\r\n          .map((song, index) => {\r\n            if (index < round) {\r\n              return (\r\n                <SongInfoWrapper key={song.title_short + index}>\r\n                  <SongArt src={song.album.cover_medium} />\r\n                  <InfoSection>\r\n                    <Title>{song.title_short}</Title>\r\n                    <Artist>{song.artist.name}</Artist>\r\n                  </InfoSection>\r\n                </SongInfoWrapper>\r\n              );\r\n            }\r\n            return;\r\n          })\r\n          .reverse()}\r\n      </SongListWrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default PreviousSong;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n  margin-bottom: 50px;\r\n  padding-right: 30px;\r\n`;\r\nconst Appear = keyframes`\r\n0%{\r\n  opacity: 0;\r\n  transform: translateY(-100%)\r\n\r\n}100%{\r\n  opacity: 1;\r\n  transform: translateY(0)\r\n\r\n}`;\r\n\r\nconst SongListWrapper = styled.div`\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  font-size: 30px;\r\n  width: 100%;\r\n  min-height: 100px;\r\n  background: white;\r\n  transition: 500ms;\r\n`;\r\n\r\nconst RoundCounter = styled.div`\r\n  width: 100%;\r\n  border-bottom: 1px solid ${COLORS.midnight};\r\n  font-size: 20px;\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst SongInfoWrapper = styled.div`\r\n  display: flex;\r\n  margin-bottom: 5px;\r\n  animation: ${Appear} 800ms ease-in-out;\r\n  transform-origin: left;\r\n`;\r\n\r\nconst SongArt = styled.img`\r\n  width: 75px;\r\n  height: 75px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst InfoSection = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Title = styled.span``;\r\n\r\nconst Artist = styled.span`\r\n  font-style: italic;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { AiFillCrown } from \"react-icons/ai\";\r\nimport COLORS from \"../../COLORS\";\r\n\r\nconst correctGuessOutput = (usersCorrectGuess) => {\r\n  console.log(usersCorrectGuess);\r\n  if (usersCorrectGuess.artist && usersCorrectGuess.songName)\r\n    return `in ${usersCorrectGuess.time.toFixed(2)} seconds`;\r\n  if (usersCorrectGuess.artist) {\r\n    return \"The artist\";\r\n  }\r\n  if (usersCorrectGuess.songName) {\r\n    return \"The song's name \";\r\n  }\r\n};\r\n\r\nconst Ranking = () => {\r\n  const {\r\n    usersList,\r\n    setCurrentRoomId,\r\n    currentUser,\r\n    currentTrackGuesses,\r\n  } = React.useContext(CurrentUserContext);\r\n\r\n  const { roomId } = useParams();\r\n\r\n  React.useEffect(() => {\r\n    setCurrentRoomId(roomId);\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Ranking: </GenericLabel>\r\n      <UsersListWrapper>\r\n        {usersList.map((user, index) => {\r\n          return (\r\n            <UserWrapper key={user.playerId}>\r\n              <InfoWrapper>\r\n                <Rank>{index + 1}.</Rank>\r\n\r\n                <UserInfoWrapper>\r\n                  <NameWrapper>\r\n                    {user.role === \"host\" ? (\r\n                      <Icon\r\n                        style={{\r\n                          color: `${\r\n                            currentUser.playerId === user.playerId\r\n                              ? COLORS.midnight\r\n                              : \"black\"\r\n                          }`,\r\n                        }}\r\n                      >\r\n                        <AiFillCrown />\r\n                      </Icon>\r\n                    ) : null}\r\n                    <UserName\r\n                      style={{\r\n                        color: `${\r\n                          currentUser.playerId === user.playerId\r\n                            ? COLORS.midnight\r\n                            : \"black\"\r\n                        }`,\r\n                      }}\r\n                    >\r\n                      {user.nickName}\r\n                    </UserName>\r\n                  </NameWrapper>\r\n                  <CorrectGuessWrapper>\r\n                    Guessed:{\" \"}\r\n                    {currentTrackGuesses &&\r\n                      currentTrackGuesses[`${user.playerId}`] && (\r\n                        <span>\r\n                          {correctGuessOutput(\r\n                            currentTrackGuesses[`${user.playerId}`]\r\n                          )}\r\n                        </span>\r\n                      )}\r\n                  </CorrectGuessWrapper>\r\n                </UserInfoWrapper>\r\n              </InfoWrapper>\r\n              <ScoreInfoWrapper>\r\n                <Score>{user.points}pts.</Score>\r\n              </ScoreInfoWrapper>\r\n            </UserWrapper>\r\n          );\r\n        })}\r\n      </UsersListWrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default Ranking;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n  margin-bottom: 50px;\r\n  padding-right: 30px;\r\n`;\r\n\r\nconst UsersListWrapper = styled.div`\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  font-size: 30px;\r\n  width: 100%;\r\n  background: white;\r\n  transition: 500ms;\r\n`;\r\n\r\nconst UserWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin: 5px 0px;\r\n`;\r\n\r\nconst InfoWrapper = styled.div`\r\n  display: flex;\r\n  max-width: 80%;\r\n`;\r\n\r\nconst UserInfoWrapper = styled.div``;\r\n\r\nconst Rank = styled.h1`\r\n  font-size: 40px;\r\n  font-weight: 800;\r\n  margin-right: 5px;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Icon = styled.div`\r\n  width: fit-content;\r\n  margin-top: 5px;\r\n`;\r\n\r\nconst Score = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst UserName = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst ScoreInfoWrapper = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst CorrectGuessWrapper = styled.div`\r\n  font-size: 20px;\r\n`;\r\n\r\nconst NameWrapper = styled.div`\r\n  display: flex;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport ProgressBar from \"./ProgressBar\";\r\nimport Cassette from \"./Cassette\";\r\nimport SearchBar from \"./SearchBar\";\r\nimport PreviousSong from \"./PreviousSongs\";\r\nimport * as firebase from \"firebase\";\r\nimport Ranking from \"./Ranking\";\r\nimport { FiVolume, FiVolumeX, FiVolume1, FiVolume2 } from \"react-icons/fi\";\r\nimport { ip } from \"../../ip\";\r\n\r\nconst GameRoom = () => {\r\n  const { roomId } = useParams();\r\n  const {\r\n    trackUrl,\r\n    setTrackUrl,\r\n    gamePhase,\r\n    setGamePhase,\r\n    setTrackInfo,\r\n    round,\r\n  } = React.useContext(GameRoomContext);\r\n  const { currentUser } = React.useContext(CurrentUserContext);\r\n  const [time, setTime] = React.useState(5);\r\n  const [volume, setVolume] = React.useState(0.5);\r\n\r\n  const audioRef = React.useRef(null);\r\n\r\n  React.useEffect(() => {\r\n    audioRef.current.volume = volume;\r\n  }, [audioRef, volume]);\r\n\r\n  //This sets the interval for the timer\r\n  React.useEffect(() => {\r\n    let interval = setInterval(() => {\r\n      if (time > 0) {\r\n        setTime(time - 1);\r\n      }\r\n    }, 1000);\r\n\r\n    //Host updates the phase when the host timer reaches 0\r\n    if (time === 0 && gamePhase === \"loading\" && currentUser.role === \"host\") {\r\n      fetch(`${ip}/updatePhase`, {\r\n        method: \"PUT\",\r\n        body: JSON.stringify({ currentPhase: \"loading\", roomId: roomId }),\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n        });\r\n    }\r\n    if (time === 0 && gamePhase === \"playing\" && currentUser.role === \"host\") {\r\n      fetch(`${ip}/updatePhase`, {\r\n        method: \"PUT\",\r\n        body: JSON.stringify({ roomId, currentPhase: \"playing\" }),\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n        })\r\n        .catch((err) => console.log(err));\r\n\r\n      fetch(`${ip}/updateRound?roomId=${roomId}`, {\r\n        method: \"GET\",\r\n        headers: { accept: \"application/json\" },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => console.log(data))\r\n        .catch((err) => console.log(err));\r\n    }\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, [time, gamePhase]);\r\n\r\n  //This checks for gamePhase change and sets the timer to the appropriate phase\r\n  React.useEffect(() => {\r\n    const gamePhaseRef = firebase.database().ref(`Rooms/${roomId}/phase`);\r\n    gamePhaseRef.on(\"value\", (snapshot) => {\r\n      let phase = snapshot.val();\r\n      if (phase === \"playing\") {\r\n        if (round > 9) {\r\n          setGamePhase(phase);\r\n          return;\r\n        }\r\n        setTime(30);\r\n        audioRef.current.play();\r\n        console.log(\"playtrack\");\r\n      }\r\n      if (phase === \"loading\") {\r\n        setTime(5);\r\n        audioRef.current.pause();\r\n        console.log(\"stopTrack\");\r\n      }\r\n      setGamePhase(phase);\r\n    });\r\n    return () => {\r\n      const gamePhaseRef = firebase.database().ref(`Rooms/${roomId}/phase`);\r\n      gamePhaseRef.off();\r\n    };\r\n  }, [roomId, round]);\r\n\r\n  //This updates the current song during the loading stage\r\n  React.useEffect(() => {\r\n    if (gamePhase === \"loading\" && currentUser.role === \"host\") {\r\n      console.log(\"in fetch track\");\r\n      fetch(`${ip}/updateCurrentTrack`, {\r\n        method: \"PUT\",\r\n        body: JSON.stringify({ roomId: roomId }),\r\n        headers: {\r\n          Accept: \"applicatition/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n          // setTrackUrl(data.selectedSongUrl);\r\n        });\r\n    }\r\n  }, [gamePhase]);\r\n\r\n  React.useEffect(() => {\r\n    const currentTrackInfo = firebase\r\n      .database()\r\n      .ref(`/Rooms/${roomId}/currentTrack/trackInfo`);\r\n    currentTrackInfo.on(\"value\", (snapshot) => {\r\n      let currentTrackInfo = snapshot.val();\r\n      if (currentTrackInfo) {\r\n        setTrackInfo(currentTrackInfo);\r\n        setTrackUrl(currentTrackInfo.preview);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      currentTrackInfo.off();\r\n    };\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <SlidderWrapper>\r\n        <Button\r\n          onClick={() => {\r\n            if (volume > 0) {\r\n              setVolume(0);\r\n              return;\r\n            }\r\n            if (volume === 0) {\r\n              setVolume(0.5);\r\n              return;\r\n            }\r\n          }}\r\n        >\r\n          {volume === 0.5 && <FiVolume size={35} />}\r\n          {volume === 0 && <FiVolumeX size={35} />}\r\n          {volume < 0.5 && volume > 0 && <FiVolume1 size={35} />}\r\n          {volume > 0.5 && <FiVolume2 size={35} />}\r\n        </Button>\r\n        <Slider\r\n          type=\"range\"\r\n          min=\"0\"\r\n          max=\"100\"\r\n          value={volume * 100}\r\n          onChange={(ev) => {\r\n            setVolume(ev.target.value / 100);\r\n          }}\r\n        />\r\n      </SlidderWrapper>\r\n\r\n      <Player src={trackUrl} ref={audioRef}>\r\n        I'm sorry, your browser doesn't support audio\r\n      </Player>\r\n      <SearchBar />\r\n      <ProgressBar />\r\n      <Cassette time={time}></Cassette>\r\n      <BottomSection>\r\n        <PreviousSong />\r\n        <Ranking />\r\n      </BottomSection>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  margin-top: 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0 40px;\r\n`;\r\n\r\nconst Player = styled.audio``;\r\n\r\nconst BottomSection = styled.div`\r\n  margin-top: 20px;\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: 50% 50%;\r\n`;\r\n\r\nconst Slider = styled.input`\r\n  width: 100%;\r\n`;\r\n\r\nconst SlidderWrapper = styled.div`\r\n  display: flex;\r\n  padding: 5px;\r\n  align-items: center;\r\n  background: white;\r\n  border-radius: 10px;\r\n  width: 50px;\r\n  transition: width 1s, opacity 1s;\r\n  margin-bottom: 15px;\r\n\r\n  input:nth-child(2) {\r\n    opacity: 0;\r\n    transition: opacity 0.8s;\r\n  }\r\n\r\n  :hover {\r\n    width: 200px;\r\n    input:nth-child(2) {\r\n      opacity: 1;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Button = styled.button`\r\n  background: none;\r\n  border: none;\r\n  width: 45px;\r\n  height: 45px;\r\n  cursor: pointer;\r\n`;\r\n\r\nexport default GameRoom;\r\n","import React from \"react\";\r\nimport COLORS from \"../../COLORS\";\r\nimport styled from \"styled-components\";\r\nimport Button from \"../Button/Button\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport { AiFillCrown } from \"react-icons/ai\";\r\nimport { ip } from \"../../ip\";\r\n\r\nconst GameOverScreen = () => {\r\n  const { usersList, setCurrentRoomId, currentUser } = React.useContext(\r\n    CurrentUserContext\r\n  );\r\n  const { setRound, setHistoryArray, setGameStarted } = React.useContext(\r\n    GameRoomContext\r\n  );\r\n  const { roomId } = useParams();\r\n  const { location, deletePlaylist } = React.useContext(LobbyContext);\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    if (location !== \"gameRoom\") {\r\n      history.push(`/lobby/${roomId}`);\r\n    }\r\n    return () => {\r\n      setRound(0);\r\n      deletePlaylist();\r\n      setHistoryArray([]);\r\n      setGameStarted(false);\r\n    };\r\n  }, [location, roomId]);\r\n\r\n  React.useEffect(() => {\r\n    setCurrentRoomId(roomId);\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Title>Here is the final ranking !</Title>\r\n      <UsersListWrapper>\r\n        {usersList.map((user, index) => {\r\n          return (\r\n            <UserWrapper key={user.playerId}>\r\n              <InfoWrapper>\r\n                <Rank>{index + 1}.</Rank>\r\n\r\n                <UserInfoWrapper>\r\n                  <NameWrapper>\r\n                    {user.role === \"host\" ? (\r\n                      <Icon\r\n                        style={{\r\n                          color: `${\r\n                            currentUser.playerId === user.playerId\r\n                              ? COLORS.midnight\r\n                              : \"black\"\r\n                          }`,\r\n                        }}\r\n                      >\r\n                        <AiFillCrown />\r\n                      </Icon>\r\n                    ) : null}\r\n                    <UserName\r\n                      style={{\r\n                        color: `${\r\n                          currentUser.playerId === user.playerId\r\n                            ? COLORS.midnight\r\n                            : \"black\"\r\n                        }`,\r\n                      }}\r\n                    >\r\n                      {user.nickName}\r\n                    </UserName>\r\n                  </NameWrapper>\r\n                </UserInfoWrapper>\r\n              </InfoWrapper>\r\n              <ScoreInfoWrapper>\r\n                <Score>{user.points}pts.</Score>\r\n              </ScoreInfoWrapper>\r\n            </UserWrapper>\r\n          );\r\n        })}\r\n      </UsersListWrapper>\r\n      {currentUser.role === \"host\" ? (\r\n        <ButtonsWrapper>\r\n          <Button\r\n            handler={() => {\r\n              fetch(`${ip}/${roomId}/lobbyReset`, {\r\n                method: \"GET\",\r\n                headers: {\r\n                  Accept: \"application/json\",\r\n                  \"Content-Type\": \"application/json\",\r\n                },\r\n              })\r\n                .then((res) => res.json())\r\n                .then((data) => console.log(data))\r\n                .catch((err) => console.log(err));\r\n            }}\r\n          >\r\n            Return to Lobby\r\n          </Button>\r\n          <Button\r\n            handler={() => {\r\n              fetch(`${ip}/${roomId}/GameReset`, {\r\n                method: \"GET\",\r\n                headers: {\r\n                  Accept: \"application/json\",\r\n                  \"Content-Type\": \"application/json\",\r\n                },\r\n              })\r\n                .then((res) => res.json())\r\n                .then((data) => console.log(data))\r\n                .catch((err) => console.log(err));\r\n            }}\r\n          >\r\n            Restart Game\r\n          </Button>\r\n        </ButtonsWrapper>\r\n      ) : (\r\n        <Title>\r\n          Plase wait for the host to choose to return to the lobby or to restart\r\n          game.\r\n        </Title>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default GameOverScreen;\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  font-family: \"Echizen\";\r\n  font-size: 60px;\r\n  text-shadow: 2px 2px 2px ${COLORS.midnight};\r\n  color: white;\r\n  margin: 20px 0px;\r\n`;\r\n\r\nconst UsersListWrapper = styled.div`\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  font-size: 30px;\r\n  width: 50%;\r\n  background: white;\r\n  transition: 500ms;\r\n  text-shadow: none;\r\n  color: black;\r\n  font-family: \"\";\r\n`;\r\n\r\nconst UserWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin: 5px 0px;\r\n`;\r\n\r\nconst InfoWrapper = styled.div`\r\n  display: flex;\r\n  max-width: 80%;\r\n`;\r\n\r\nconst UserInfoWrapper = styled.div``;\r\n\r\nconst Rank = styled.h1`\r\n  font-size: 40px;\r\n  font-weight: 800;\r\n  margin-right: 5px;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Icon = styled.div`\r\n  width: fit-content;\r\n  margin-top: 5px;\r\n`;\r\n\r\nconst Score = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst UserName = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst ScoreInfoWrapper = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst NameWrapper = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst ButtonsWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  width: 100%;\r\n  margin: 20px 0px;\r\n`;\r\n","import React from \"react\";\r\nimport GameRoom from \"./GameRoom\";\r\nimport GameOver from \"./GameOver\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport ErrorScreen from \"../ErrorScreen/ErrorScreen\";\r\nimport * as firebase from \"firebase\";\r\nimport { ip } from \"../../ip\";\r\n\r\nconst GameRoomWrapper = () => {\r\n  const {\r\n    round,\r\n    gamePhase,\r\n    gameRoomExists,\r\n    setGameRoomExists,\r\n    setGameStarted,\r\n    setHistoryArray,\r\n  } = React.useContext(GameRoomContext);\r\n  const { currentUser, setCurrentUser, isHostPresent } = React.useContext(\r\n    CurrentUserContext\r\n  );\r\n  const { deletePlaylist } = React.useContext(LobbyContext);\r\n  const history = useHistory();\r\n  const { roomId } = useParams();\r\n  console.log(gameRoomExists);\r\n\r\n  React.useEffect(() => {\r\n    const roomRef = firebase.database().ref(`Rooms/${roomId}`);\r\n\r\n    roomRef.on(\"value\", (snapshot) => {\r\n      setGameRoomExists(snapshot.exists());\r\n    });\r\n  }, [roomId]);\r\n\r\n  React.useEffect(() => {\r\n    console.log(history.action);\r\n\r\n    return () => {\r\n      if (history.action === \"POP\") {\r\n        history.push(\"/\");\r\n        setCurrentUser(null);\r\n        setGameStarted(false);\r\n        deletePlaylist();\r\n        setHistoryArray([]);\r\n\r\n        fetch(`${ip}/deleteUser`, {\r\n          method: \"DELETE\",\r\n          body: JSON.stringify({ currentUser, roomId }),\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        })\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            console.log(data);\r\n          });\r\n        return;\r\n      }\r\n    };\r\n  }, [history, currentUser, roomId]);\r\n\r\n  React.useEffect(() => {\r\n    setGameStarted(true);\r\n  }, []);\r\n\r\n  if (gameRoomExists === false) {\r\n    return (\r\n      <ErrorScreen\r\n        title=\"404 - Room not found\"\r\n        message={\r\n          \"We're sorry, we couldn't find the room you are trying to join\"\r\n        }\r\n      />\r\n    );\r\n  }\r\n  if (isHostPresent === false) {\r\n    return (\r\n      <ErrorScreen\r\n        title=\"The host has left\"\r\n        message=\"We're sorry, the host has left and the game has ended. Return to the homepage to start a new game.\"\r\n      />\r\n    );\r\n  }\r\n\r\n  if (!currentUser && gameRoomExists) {\r\n    return <>{history.push(`/lobby/${roomId}`)}</>;\r\n  }\r\n\r\n  if (round > 9 && gamePhase === \"playing\" && gameRoomExists === true) {\r\n    return <GameOver />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {gameRoomExists === true && isHostPresent === true && currentUser ? (\r\n        <GameRoom />\r\n      ) : (\r\n        <Spinner size={50} color={\"lightgrey\"} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GameRoomWrapper;\r\n","import { createGlobalStyle } from \"styled-components\";\r\nimport COLORS from \"./COLORS\";\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n*{\r\n  box-sizing:border-box;\r\n  font-family: \"Roboto Condensed\", sans-serif;\r\n  /* font-family:'Echizen'; */\r\n  /* color: black; */\r\n}\r\n\r\nbody{\r\n  background: ${COLORS.main}\r\n}\r\n\r\nhtml, body, div, span, applet, object, iframe,\r\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\r\na, abbr, acronym, address, big, cite, code,\r\ndel, dfn, em, img, ins, kbd, q, s, samp,\r\nsmall, strike, strong, sub, sup, tt, var,\r\nb, u, i, center,\r\ndl, dt, dd, ol, ul, li,\r\nfieldset, form, label, legend,\r\ntable, caption, tbody, tfoot, thead, tr, th, td,\r\narticle, aside, canvas, details, embed, \r\nfigure, figcaption, footer, header, hgroup, \r\nmenu, nav, output, ruby, section, summary,\r\ntime, mark, audio, video {\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\tborder: 0;\r\n\tfont-size: 100%;\r\n\t/* font: inherit; */\r\n\tvertical-align: baseline;\r\n}\r\n/* HTML5 display-role reset for older browsers */\r\narticle, aside, details, figcaption, figure, \r\nfooter, header, hgroup, menu, nav, section {\r\n\tdisplay: block;\r\n}\r\nbody {\r\n\tline-height: 1;\r\n}\r\nol, ul {\r\n\tlist-style: none;\r\n}\r\nblockquote, q {\r\n\tquotes: none;\r\n}\r\nblockquote:before, blockquote:after,\r\nq:before, q:after {\r\n\tcontent: '';\r\n\tcontent: none;\r\n}\r\ntable {\r\n\tborder-collapse: collapse;\r\n\tborder-spacing: 0;\r\n}\r\n`;\r\n\r\nexport default GlobalStyle;\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport Background from \"./Background/Background\";\r\nimport Header from \"./Header/Header\";\r\nimport SignIn from \"./SignIn/SignIn\";\r\nimport HostHandler from \"./SignIn/HostHandler\";\r\nimport LobbyWrapper from \"./Lobby/LobbyWrapper\";\r\nimport GameRoomWrapper from \"./GameRoom/GameRoomWrapper\";\r\nimport GlobalStyles from \"../GlobalStyles\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <Router>\r\n      <Background>\r\n        <Header />\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n            <SignIn\r\n              buttonHandler={HostHandler}\r\n              buttonMessage=\"Create Private Room\"\r\n            />\r\n          </Route>\r\n          <Route path=\"/lobby/:roomId\">\r\n            <LobbyWrapper />\r\n          </Route>\r\n          <Route path=\"/gameroom/:roomId\">\r\n            <GameRoomWrapper />\r\n          </Route>\r\n        </Switch>\r\n        <GlobalStyles />\r\n      </Background>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport FireBaseContextProvider from \"./FirebaseContext\";\r\nimport CurrentUserContextProvider from \"./CurrentUserContext\";\r\nimport LobbyContextProvider from \"./LobbyContext\";\r\nimport GameRoomContextProvider from \"./GameRoomContext\";\r\nimport App from \"./components/App\";\r\n\r\nReactDOM.render(\r\n  <FireBaseContextProvider>\r\n    <CurrentUserContextProvider>\r\n      <LobbyContextProvider>\r\n        <GameRoomContextProvider>\r\n          <App />\r\n        </GameRoomContextProvider>\r\n      </LobbyContextProvider>\r\n    </CurrentUserContextProvider>\r\n  </FireBaseContextProvider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}